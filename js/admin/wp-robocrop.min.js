!function(t){var e;e={cropFromFocusPoint:function(t,e){var o=(t.focuspoint.x+1)/2*t.width,i=(1-t.focuspoint.y)/2*t.height,s=Math.min(t.width/e.min_width,t.height/e.min_height),n=e.min_width*s,r=e.min_height*s,a=Math.min(Math.max(o-n/2,0),t.width-n),c=Math.min(Math.max(i-r/2,0),t.height-r);return{names:e.sizes,x:a/t.width,y:c/t.height,width:n/t.width,height:r/t.height}},relToAbsCoords:function(t,e){var o,i={};for(o in t)switch(o){case"x":case"x1":case"x2":case"width":i[o]=t[o]*e.width;break;case"y":case"y1":case"y2":case"height":i[o]=t[o]*e.height;break;default:i[o]=t[o]}return i},absToRelCoords:function(t,e){var o,i={};for(o in t)switch(o){case"x":case"x1":case"x2":case"width":i[o]=t[o]/e.width;break;case"y":case"y1":case"y2":case"height":i[o]=t[o]/e.height;break;default:i[o]=t[o]}return i},pointToRectCoords:function(t){return{x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}},rectToPointCoords:function(t){return{x1:t.x,y1:t.y,x2:t.maxX?t.maxX:t.x+t.width,y2:t.maxY?t.maxY:t.y+t.height}},view:{},controller:{}},t.media.robocrop=e}(wp),function(t,e){var o=window.wp_robocrop.image_ratios,i=window.wp_robocrop.image_sizes,s=window.wp_robocrop.l10n;window.wp_robocrop.options;t.media.robocrop.view.Img=t.media.View.extend({className:"attachment-image",tagName:"img",id:"robocrop-image",initialize:function(){var t=this;_.defaults(this.options,{src:""}),this.$el.on("load",function(){t.width=t.$el.get(0).naturalWidth,t.height=t.$el.get(0).naturalHeight,t.ratio=t.width/t.height,t.trigger("load",t)}),this.$el.attr("src",this.options.src)},getSrc:function(t){return this.$el.attr("src")},setSrc:function(t){return!!t&&this.$el.attr("src",t),this}}),t.media.robocrop.view.RobocropRatioSelect=t.media.View.extend({className:"robocrop-select",template:t.template("robocrop-select"),events:{'click [name="robocrop-select-ratio"]':"selectRatio"},initialize:function(){t.Backbone.View.prototype.initialize.apply(this,arguments),_.defaults({ratios:{},tools:{}},this.options),this.options.l10n=s},render:function(){t.Backbone.View.prototype.render.apply(this,arguments);var o=this;_.each(this.options.tools,function(e,i){o.views.add(new t.media.robocrop.view.RobocropRatioSelectItem({ratiokey:i,sizenames:!1,ratio:i,title:e.title,enabled:!0}))}),_.each(this.options.ratios,function(s,n){var r=[],a=_.template('<span class="sizename<%= cancrop ? "" : " disabled" %>"><%= name %> (<%= width %>Ã—<%= height %>)</span>');_.each(s.sizes,function(t,s){var n=e.extend(!0,{cancrop:o.model.get("width")>=i[t].width&&o.model.get("height")>=i[t].height},i[t]);n.crop&&r.push(a(n))}),o.views.add(new t.media.robocrop.view.RobocropRatioSelectItem({ratiokey:n,sizenames:r.join(""),ratio:n,title:n+" : 1",enabled:o.model.get("width")>=s.min_width&&o.model.get("height")>=s.min_height}))})},setSelected:function(t){this.$el.find('[name="robocrop-select-ratio"][value="'+t+'"]').prop("checked",!0),this.selectRatio()},getSelected:function(){return this.$el.find('[name="robocrop-select-ratio"]:checked').val()},selectRatio:function(t){this.options.ratios[this.getSelected()]?this.trigger("select-ratio"):this.options.tools[this.getSelected()]&&this.trigger("select-tool"),this.trigger("select")}}),t.media.robocrop.view.RobocropRatioSelectItem=t.media.View.extend({className:"robocrop-select-item",template:t.template("robocrop-select-item"),sizekey:"",sizenames:"",ratio:0,enabled:null,render:function(){t.Backbone.View.prototype.render.apply(this,arguments),this.$el.find('input[type="radio"]').prop("disabled",!this.options.enabled)}}),t.media.robocrop.view.RobocropImage=t.media.View.extend({className:"image-robocrop",template:t.template("robocrop"),image_ratios:o,image_sizes:i,_croppers:null,events:{"click .robocrop-autocrop-current":"autocrop","click .robocrop-autocrop-all":"autocropAll"},initialize:function(e){this._croppers={},this.image=new t.media.robocrop.view.Img({src:this.model.get("url")}),this.controller=e.controller,this.focuspointtool=new t.media.robocrop.view.focuspoint.ImageFocusPointSelect({image:this.image,focuspoint:{x:0,y:0},src:this.model.get("url")}),this.listenTo(this.focuspointtool,"changed",this.updateFocusPoint),t.media.View.prototype.initialize.apply(this,arguments)},dismiss:function(){var t=this.$areaSelect();t&&t.remove(),this.$el.remove()},createSelect:function(){this.select=new t.media.robocrop.view.RobocropRatioSelect({choices:choices})},hasChanged:function(){this.trigger("changed")},render:function(){var e=this;return t.media.View.prototype.render.apply(this,arguments),this.views.set(".robocrop-content",this.focuspointtool),this.focuspointtool.setFocuspoint(this.model.get("focuspoint")),this.image.$el.imgAreaSelect({parent:this.image.$el.closest(".robocrop-image-box"),instance:!0,handles:!0,keys:!0,persistent:!0,enabled:!0,movable:!0,resizable:!0,imageHeight:this.model.get("height"),imageWidth:this.model.get("width"),onSelectEnd:function(o,i){var s=t.media.robocrop.pointToRectCoords(i);e._setCropSizes(s),e.hasChanged()}}),this.selectRatio=new t.media.robocrop.view.RobocropRatioSelect({tools:{focuspoint:{title:s.SetFocusPoint,trigger:"focuspoint"}},ratios:this.image_ratios,model:this.model}),this.selectRatio.on("select-ratio",this.onselectratio,this).on("select-tool",this.onselecttool,this).on("select",this.updateButtons,this),this.views.set(".select-ratio",this.selectRatio),this.$autoButton=this.$el.find(".robocrop-autocrop-current"),this.$autoAllButton=this.$el.find(".robocrop-autocrop-all"),this},ready:function(){var e,o;return t.media.view.EditImage.prototype.ready.apply(this,arguments),_.isUndefined(this.options.sizeToSelect)||(o=_.find(this.image_ratios,function(t){return t.sizes.indexOf(this.options.sizeToSelect)>-1},this))&&(e=o.name),_.isUndefined(e)&&(e="focuspoint"),this.selectRatio.setSelected(e),this},save:function(){var t={attachments:{}},o=this.model.get("id"),i=this.$autoAllButton.add(this.$autoButton).prop("disabled",!0),s=this;return t.attachments[o]={sizes:this.model.get("sizes"),focuspoint:this.model.get("focuspoint")},this.model.saveCompat(t,{}).done(function(t){var o=new Date;_.each(s.model.attributes.sizes,function(t,i){var s='img[src^="'+t.url+'"]',n=function(){e(this).removeAttr("src").attr("src",t.url+"?"+o.getTime())};refresh_mce=function(){e(this).removeAttr("data-mce-src").attr("data-mce-src",t.url+"?"+o.getTime())},"full"!==i&&(e(document).add(e("iframe").contents()).find(s).each(n),e(".mce-edit-area iframe").each(function(){e(this).contents().find(s).each(n).each(refresh_mce)}))},s),i.prop("disabled",!1),s.trigger("saved")}),this},updateButtons:function(){var t=this.selectRatio.getSelected();this.$autoButton.toggleClass("hidden","focuspoint"===t),this.$autoAllButton.toggleClass("hidden","focuspoint"!==t)},onselecttool:function(){var t=this.selectRatio.getSelected();switch(this.$areaSelect().cancelSelection(),t){case"focuspoint":this.focuspointtool.setEnabled(!0)}},onselectratio:function(){this.focuspointtool.setEnabled(!1);var t,e,o,s=this.selectRatio.getSelected(),n=this.model.get("sizes"),r=this,a=this.model.get("width"),c=this.model.get("height");if(this.current_ratio=this.image_ratios[s],o={aspectRatio:this.current_ratio.ratio+":1",minWidth:this.current_ratio.min_width,minHeight:this.current_ratio.min_height},_.each(this.current_ratio.sizes,function(t){!e&&n[t]&&n[t].cropdata&&(e=n[t].cropdata),i[t].width<=a&&i[t].height<=c&&(o.minWidth=Math.max(o.minWidth,i[t].width),o.minHeight=Math.max(o.minHeight,i[t].height))}),e)t={},_.extend(t,e);else{var h=Math.min(this.model.get("width")/this.current_ratio.ratio,this.model.get("height"));t={x:0,y:0,width:h*this.current_ratio.ratio,height:h},t.x=(this.model.get("width")-t.width)/2,t.y=(this.model.get("height")-t.height)/2}return this.$areaSelect().setOptions(o),this.image.$el.get(0).complete?this.selectCrop(t):this.image.$el.on("load",function(){r.selectCrop(t)}),this},autocrop:function(e){var o,i={width:this.model.get("width"),height:this.model.get("height"),focuspoint:this.model.get("focuspoint")};return o=t.media.robocrop.cropFromFocusPoint(i,this.current_ratio),o=t.media.robocrop.relToAbsCoords(o,i),this._setCropSizes(o),this.selectCrop(o),this},autocropAll:function(e){var o=this,i={width:this.model.get("width"),height:this.model.get("height"),focuspoint:this.model.get("focuspoint")};return _.each(this.image_ratios,function(e){var s;s=t.media.robocrop.cropFromFocusPoint(i,e),s=t.media.robocrop.relToAbsCoords(s,i),o._setCropSizes(s,e)}),this},selectCrop:function(e){var o=(this._image_scale_factor(),t.media.robocrop.rectToPointCoords(e)),i=this.$areaSelect();return i.setSelection(o.x1,o.y1,o.x2,o.y2,!1),i.setOptions({show:!0}),i.update(),this},$areaSelect:function(){return this.image.$el.data("imgAreaSelect")},_image_scale_factor:function(){var t=this.image.$el.closest(".robocrop-image-box"),e=Math.min(this.model.get("width"),t.width()),o=Math.min(this.model.get("height"),t.height());return Math.min(e/this.model.get("width"),o/this.model.get("height"))},updateFocusPoint:function(){this.model.set("focuspoint",this.focuspointtool.getFocuspoint())},_setCropSizes:function(t,e){var o=this.model.get("sizes");e=e||this.current_ratio,_.each(e.sizes,function(e){!o[e]&&(o[e]={}),o[e].cropdata=t}),this.model.set("sizes",o)},_getRelativeCoords:function(t){var e=this.model.get("width"),o=this.model.get("height");for(var i in t)if("number"==typeof t[i])switch(i){case"x":case"x1":case"x2":case"width":case"minX":case"maxX":t[i]/=e;break;default:t[i]/=o}},_getAbsoluteCoords:function(t){var e=this.model.get("width"),o=this.model.get("height");for(var i in t)if("number"==typeof t[i])switch(i){case"x":case"x1":case"x2":case"width":case"minX":case"maxX":t[i]*=e;break;default:t[i]*=o}}}),t.media.robocrop.view.Frame=t.media.view.MediaFrame.extend({template:t.template("robocrop-modal"),regions:["title","content","instructions","buttons"]}),t.media.robocrop.view.Frame.Crop=t.media.robocrop.view.Frame.extend({events:{"click .robocrop-save":"save","click .robocrop-cancel":"close"},save:function(){this.$(".robocrop-save, .robocrop-cancel").prop("disabled",!0),this._content.save()},initialize:function(e){t.media.robocrop.view.Frame.prototype.initialize.apply(this,arguments),this.createTitle(),this.createContent(),this.createButtons(),this.on("close",this.dismiss,this),this.listenTo(this._content,"saved",this.modelSync)},modelSync:function(){this.$(".robocrop-save, .robocrop-cancel").prop("disabled",!1)},dismiss:function(){this._content.dismiss()},createTitle:function(){this._title=new t.media.View({tagName:"h1"}),this._title.$el.text(s.AttachmentDetails),this.title.set([this._title])},createContent:function(){var e=_.extend({controller:this.controller,model:this.model},this.options);this._content=new t.media.robocrop.view.RobocropImage(e),this.content.set([this._content])},createButtons:function(){this.buttons.set([new t.media.view.Button({text:s.Close,className:"button-secondary robocrop-cancel"}),new t.media.view.Button({text:s.SaveChanges,className:"button-primary robocrop-save"})])}})}(wp,jQuery),function(t,e){var o,i,s=window.wp_robocrop.image_ratios,n=(window.wp_robocrop.image_sizes,window.wp_robocrop.l10n),r=t.media.View;t.media.view.MediaFrame;t.media.robocrop.view.focuspoint={},i=t.media.robocrop.view.focuspoint.CropRect=r.extend({template:t.template("croprect"),className:"tool-croprect",controller:null,initialize:function(){r.prototype.initialize.apply(this,arguments),_.defaults(this.options,{focuspoint:null,ratio:null}),this.controller=this.options.controller,this.listenTo(this.controller.image,"load",this.imageLoaded)},imageLoaded:function(t){this.$el.attr("data-ratio-name",this.options.ratio.name+" : 1"),this.$el.attr("data-dir",this.options.ratio.ratio>t.ratio?"w":"h"),this.$el.css("width",100*Math.min(1,this.options.ratio.ratio/t.ratio)+"%"),this.setFocuspoint()},setFocuspoint:function(e){e&&(this.options.focuspoint=e);var o={width:this.controller.image.$el.width(),height:this.controller.image.$el.height(),focuspoint:this.options.focuspoint},i=t.media.robocrop.cropFromFocusPoint(o,this.options.ratio),s=t.media.robocrop.relToAbsCoords(i,o);return this.$el.css("left",s.x+"px"),this.$el.css("top",s.y+"px"),this}}),o=t.media.robocrop.view.focuspoint.FocusPoint=r.extend({className:"tool-focuspoint",template:t.template("focuspoint"),initialize:function(){var t=this;_.defaults(this.options,{focuspoint:{x:0,y:0},enabled:!1,cropRects:[]}),this.options.cropRects.sort(function(t,e){return t.options.ratio.ratio-e.options.ratio.ratio}),this.$el.on("click",function(e){t.clickFocuspoint(e)})},render:function(){var t=this;return r.prototype.render.apply(this,arguments),_.each(this.options.cropRects,function(e){e.render(),t.$el.append(e.$el)}),this},setEnabled:function(t){var e=this.options.enabled;return this.options.enabled=t,this.$el.attr("data-enabled",t.toString()),e},clickFocuspoint:function(t){var e;this.options.enabled&&(e=this.$el.offset(),this.setFocuspoint({x:2*(t.pageX-e.left)/this.$el.width()-1,y:-2*(t.pageY-e.top)/this.$el.height()+1}))},getFocuspoint:function(){return this.focuspoint},setFocuspoint:function(t){var e=this;return this.focuspoint=t,this.$el.find(".focuspoint").css({left:50*(t.x+1)+"%",bottom:50*(t.y+1)+"%"}),_.each(this.options.cropRects,function(t){t.setFocuspoint(e.focuspoint)}),this.options.enabled&&this.trigger("change:focuspoint",this.focuspoint),this}}),t.media.robocrop.view.focuspoint.ImageFocusPointSelect=r.extend({className:"robocrop-image-box",cropRects:[],initialize:function(){_.defaults(this.options,{controller:this,focuspoint:{x:0,y:0},src:!1,image:!1,enabled:!1});var e=this;!1!==this.options.image&&this.options.image.constructor.prototype==t.media.robocrop.view.Img.prototype?this.image=this.options.image:!1!==this.options.src?this.image=new t.media.robocrop.view.Img({src:this.options.src}):this.image=new t.media.robocrop.view.Img({src:""},this.options.image),this.cropRects=[],_.each(s,function(t,o){e.cropRects.push(new i({controller:e,focuspoint:e.options.focuspoint,ratio:t}))}),this.focuspoint=new o({controller:this.controller,focuspoint:this.options.focuspoint,enabled:this.options.enabled,cropRects:this.cropRects}),this.listenTo(this.focuspoint,"change:focuspoint",this.valueChanged)},setEnabled:function(t){return this.focuspoint.setEnabled(t)},render:function(){r.prototype.render.apply(this,arguments);return this.views.set([this.image,this.focuspoint]),this},getFocuspoint:function(){return this.focuspoint.getFocuspoint()},setFocuspoint:function(t){return this.focuspoint&&this.focuspoint.setFocuspoint(t),this},getImageWidth:function(){return this.image.$el.get(0).naturalWidth},getImageHeight:function(){return this.image.$el.get(0).naturalHeight},setSrc:function(t){return this.image.$el.attr("src",t),this},valueChanged:function(){this.trigger("changed")}}),t.media.robocrop.view.Frame.Focuspoint=t.media.robocrop.view.Frame.extend({className:"ask-focuspoint media-frame",events:{"click .reset":"reset","click .proceed":"proceed","click .cancel-upload":"cancelUpload"},initialize:function(){_.defaults(this.options,{uploader:!1,title:n.SetFocusPoint,modal:!!this.options&&this.options.modal,src:""}),t.media.robocrop.view.Frame.prototype.initialize.apply(this,arguments),this.modal&&this.modal.on("escape",this.cancelUpload,this),this.createTitle(),this.createContent(),this.createInstructions(),this.createButtons()},createTitle:function(){this._title=new t.media.View({tagName:"h1"}),this._title.$el.text(this.options.title),this.title.set([this._title])},createContent:function(){this._content=new t.media.robocrop.view.focuspoint.ImageFocusPointSelect({src:"",focuspoint:{x:0,y:0},controller:this,enabled:!0}),this.content.set([this._content])},createInstructions:function(){this.instructions.set([new t.media.View({el:e('<div class="instructions">'+n.FocusPointInstructions+"</div>")[0],priority:-40})])},createButtons:function(){this.buttons.set([new t.media.view.Button({text:n.CancelUpload,className:"cancel-upload"}),new t.media.view.Button({text:n.Reset,className:"reset"}),new t.media.view.Button({text:n.Okay,className:"button-primary proceed"})])},setSrc:function(t){this._content.setSrc(t)},setFile:function(t){var e=this,o=new FileReader;o.onload=function(t){e.setSrc(o.result)},o.readAsDataURL(t)},setFocuspoint:function(t){this._content.setFocuspoint(t)},getFocuspoint:function(){return this._content.getFocuspoint()},getImageWidth:function(){return this._content.getImageWidth()},getImageHeight:function(){return this._content.getImageHeight()},reset:function(t){this.setFocuspoint({x:0,y:0})},proceed:function(t){this.trigger("proceed")},cancelUpload:function(t){this.trigger("cancel-upload"),this.close()}})}(wp,jQuery),function(t,e){var o=(window.wp_robocrop.image_ratios,window.wp_robocrop.image_sizes,window.wp_robocrop.l10n),i=(window.wp_robocrop.options,'<button type="button" class="button robocrop-open">'+o.EditImageSizes+"</button>"),s='<button type="button" class="button-link robocrop-open">'+o.EditImageSizes+"</button>",n={createStates:function(){this._parentCreateStates.apply(this,arguments),this.states.add(new t.media.robocrop.controller.RobocropImage({model:this.model,selection:this.options.selection}))}};_.extend(t.media.view.ImageDetails.prototype,{_parentPostRender:t.media.view.ImageDetails.prototype.postRender,postRender:function(){this._parentPostRender.apply(this,arguments),this.$el.find(".actions").append(i)},robocropOpen:function(e){console.log();var o=this.model.get("size");new t.media.robocrop.view.Frame.Crop({controller:this.controller,model:this.controller.image.attachment,sizeToSelect:o}).open()}}),t.media.view.ImageDetails.prototype.events["click .robocrop-open"]="robocropOpen",_.extend(t.media.view.Attachment.Details.prototype,{_parentRender:t.media.view.Attachment.Details.prototype.render,render:function(){this._parentRender.apply(this,arguments),"image"===this.model.get("type")&&(this.$(".attachment-actions").append(i),e(s).insertAfter(this.$el.find("a.edit-attachment")))},robocropOpen:function(e){new t.media.robocrop.view.Frame.Crop({controller:this.controller,model:this.model}).open()},_parentCreateStates:t.media.view.Attachment.Details.prototype.createStates},n),t.media.view.Attachment.Details.prototype.events["click .robocrop-open"]="robocropOpen"}(wp,jQuery),function(t){var e=window.wp_robocrop.image_ratios,o=(window.wp_robocrop.image_sizes,window.wp_robocrop.options),i={};o.ask_for_focuspoint&&_.extend(wp.media.view.UploaderWindow.prototype,{_parentReady:wp.media.view.UploaderWindow.prototype.ready,didReady:!1,ready:function(){function o(e){var s;r&&r.close().dispose(),a.length?(s=a.shift(),r=new wp.media.robocrop.view.Frame.Focuspoint({controller:t(this)}),r.on("proceed",function(){i[s.file.name]={focuspoint:r.getFocuspoint(),width:r.getImageWidth(),height:r.getImageHeight()},o(e)}).on("cancel-upload",function(){s.file.attachment.destroy()}),r.setFocuspoint({x:0,y:0}),r.setFile(s.blob),r.open()):e.start()}function s(t,e){a.push(t)}function n(t){var e={file:t,blob:t.getNative()};return e.blob||(e.blob=t.getSource()),e}var r,a=[];return this.didReady?this._parentReady.apply(this,arguments):(this.didReady=!0,ret=this._parentReady.apply(this,arguments),this.uploader.uploader.bind("FilesAdded",function(t,e){for(var i,r=0;r<e.length;r++)"image/png"!=e[r].type&&"image/jpeg"!=e[r].type||(i=n(e[r]),i.blob instanceof Blob&&s(i,t));a.length&&(t.stop(),t.refresh(),o(t),console.log("askfocus"))}),this.uploader.uploader.bind("BeforeUpload",function(t,o){var s,n;if(i[o.name]){imageinfo=i[o.name],n={};for(s in e)n[e[s].name]=wp.media.robocrop.cropFromFocusPoint(imageinfo,e[s]);t.settings.multipart_params.focuspoint=JSON.stringify(imageinfo.focuspoint),t.settings.multipart_params.cropdata=JSON.stringify(n),delete i[o.name]}}),ret)}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvYm9jcm9wLWJhc2UuanMiLCJyb2JvY3JvcC1tZWRpYS12aWV3LmpzIiwicm9ib2Nyb3AtZm9jdXNwb2ludC1tZWRpYS12aWV3LmpzIiwicm9ib2Nyb3Atd3AtbWVkaWEtdmlldy5qcyIsInJvYm9jcm9wLWZvY3VzcG9pbnQtd3AtdXBsb2FkZXIuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsInJvYm9jcm9wIiwiY3JvcEZyb21Gb2N1c1BvaW50IiwiaW1hZ2VpbmZvIiwiY3JvcGluZm8iLCJmcF94IiwiZm9jdXNwb2ludCIsIngiLCJ3aWR0aCIsImZwX3kiLCJ5IiwiaGVpZ2h0Iiwic2NhbGUiLCJNYXRoIiwibWluIiwibWluX3dpZHRoIiwibWluX2hlaWdodCIsImNyb3BfdyIsImNyb3BfaCIsImNyb3BfeCIsIm1heCIsImNyb3BfeSIsIm5hbWVzIiwic2l6ZXMiLCJyZWxUb0Fic0Nvb3JkcyIsImNyb3BkYXRhIiwicyIsInJldCIsImFic1RvUmVsQ29vcmRzIiwicG9pbnRUb1JlY3RDb29yZHMiLCJwb2ludHMiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInJlY3RUb1BvaW50Q29vcmRzIiwicmVjdCIsIm1heFgiLCJtYXhZIiwidmlldyIsImNvbnRyb2xsZXIiLCJtZWRpYSIsIndwIiwiJCIsImltYWdlX3JhdGlvcyIsIndpbmRvdyIsIndwX3JvYm9jcm9wIiwiaW1hZ2Vfc2l6ZXMiLCJsMTBuIiwib3B0aW9ucyIsIkltZyIsIlZpZXciLCJleHRlbmQiLCJjbGFzc05hbWUiLCJ0YWdOYW1lIiwiaWQiLCJpbml0aWFsaXplIiwic2VsZiIsInRoaXMiLCJfIiwiZGVmYXVsdHMiLCJzcmMiLCIkZWwiLCJvbiIsImdldCIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJyYXRpbyIsInRyaWdnZXIiLCJhdHRyIiwiZ2V0U3JjIiwic2V0U3JjIiwiUm9ib2Nyb3BSYXRpb1NlbGVjdCIsInRlbXBsYXRlIiwiZXZlbnRzIiwiY2xpY2sgW25hbWU9XCJyb2JvY3JvcC1zZWxlY3QtcmF0aW9cIl0iLCJCYWNrYm9uZSIsInByb3RvdHlwZSIsImFwcGx5IiwiYXJndW1lbnRzIiwicmF0aW9zIiwidG9vbHMiLCJyZW5kZXIiLCJlYWNoIiwidG9vbCIsImtleSIsInZpZXdzIiwiYWRkIiwiUm9ib2Nyb3BSYXRpb1NlbGVjdEl0ZW0iLCJyYXRpb2tleSIsInNpemVuYW1lcyIsInRpdGxlIiwiZW5hYmxlZCIsIm5hbWVfdHBsIiwic2l6ZW5hbWUiLCJzaXplIiwiY2FuY3JvcCIsIm1vZGVsIiwiY3JvcCIsInB1c2giLCJqb2luIiwic2V0U2VsZWN0ZWQiLCJmaW5kIiwicHJvcCIsInNlbGVjdFJhdGlvIiwiZ2V0U2VsZWN0ZWQiLCJ2YWwiLCJldmVudCIsInNpemVrZXkiLCJSb2JvY3JvcEltYWdlIiwiX2Nyb3BwZXJzIiwiY2xpY2sgLnJvYm9jcm9wLWF1dG9jcm9wLWN1cnJlbnQiLCJjbGljayAucm9ib2Nyb3AtYXV0b2Nyb3AtYWxsIiwiaW1hZ2UiLCJmb2N1c3BvaW50dG9vbCIsIkltYWdlRm9jdXNQb2ludFNlbGVjdCIsImxpc3RlblRvIiwidXBkYXRlRm9jdXNQb2ludCIsImRpc21pc3MiLCJhcmVhU2VsZWN0IiwiJGFyZWFTZWxlY3QiLCJyZW1vdmUiLCJjcmVhdGVTZWxlY3QiLCJzZWxlY3QiLCJjaG9pY2VzIiwiaGFzQ2hhbmdlZCIsInNldCIsInNldEZvY3VzcG9pbnQiLCJpbWdBcmVhU2VsZWN0IiwicGFyZW50IiwiY2xvc2VzdCIsImluc3RhbmNlIiwiaGFuZGxlcyIsImtleXMiLCJwZXJzaXN0ZW50IiwibW92YWJsZSIsInJlc2l6YWJsZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsIm9uU2VsZWN0RW5kIiwiY29vcmRzIiwiX3NldENyb3BTaXplcyIsIlNldEZvY3VzUG9pbnQiLCJvbnNlbGVjdHJhdGlvIiwib25zZWxlY3R0b29sIiwidXBkYXRlQnV0dG9ucyIsIiRhdXRvQnV0dG9uIiwiJGF1dG9BbGxCdXR0b24iLCJyZWFkeSIsImN1cnJlbnRSYXRpbyIsImZvdW5kIiwiRWRpdEltYWdlIiwiaXNVbmRlZmluZWQiLCJzaXplVG9TZWxlY3QiLCJpbmRleE9mIiwibmFtZSIsInNhdmUiLCJkYXRhIiwiYXR0YWNobWVudHMiLCIkYnRucyIsInNhdmVDb21wYXQiLCJkb25lIiwicmVzcCIsImQiLCJEYXRlIiwiYXR0cmlidXRlcyIsInNlbGVjdG9yIiwidXJsIiwicmVmcmVzaCIsInJlbW92ZUF0dHIiLCJnZXRUaW1lIiwicmVmcmVzaF9tY2UiLCJkb2N1bWVudCIsImNvbnRlbnRzIiwidG9vbGtleSIsInRvZ2dsZUNsYXNzIiwiY2FuY2VsU2VsZWN0aW9uIiwic2V0RW5hYmxlZCIsImFyZWFTZWxlY3RPcHRpb25zIiwiaW1nV2lkdGgiLCJpbWdIZWlnaHQiLCJjdXJyZW50X3JhdGlvIiwiYXNwZWN0UmF0aW8iLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsInNldE9wdGlvbnMiLCJjb21wbGV0ZSIsInNlbGVjdENyb3AiLCJhdXRvY3JvcCIsImF1dG9jcm9wQWxsIiwiX2ltYWdlX3NjYWxlX2ZhY3RvciIsInNldFNlbGVjdGlvbiIsInNob3ciLCJ1cGRhdGUiLCIkY29udGFpbmVyIiwidyIsImgiLCJnZXRGb2N1c3BvaW50IiwibW9kZWxTaXplcyIsIl9nZXRSZWxhdGl2ZUNvb3JkcyIsIl9nZXRBYnNvbHV0ZUNvb3JkcyIsIkZyYW1lIiwiTWVkaWFGcmFtZSIsInJlZ2lvbnMiLCJDcm9wIiwiY2xpY2sgLnJvYm9jcm9wLXNhdmUiLCJjbGljayAucm9ib2Nyb3AtY2FuY2VsIiwiX2NvbnRlbnQiLCJjcmVhdGVUaXRsZSIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVCdXR0b25zIiwibW9kZWxTeW5jIiwiX3RpdGxlIiwidGV4dCIsIkF0dGFjaG1lbnREZXRhaWxzIiwib3B0cyIsImNvbnRlbnQiLCJidXR0b25zIiwiQnV0dG9uIiwiQ2xvc2UiLCJTYXZlQ2hhbmdlcyIsImpRdWVyeSIsIkZvY3VzUG9pbnQiLCJDcm9wUmVjdCIsImltYWdlTG9hZGVkIiwiY3NzIiwicmVzIiwiY29vcmQiLCJjcm9wUmVjdHMiLCJzb3J0IiwiYSIsImIiLCJjbGlja0ZvY3VzcG9pbnQiLCJhcHBlbmQiLCJwcmV2IiwidG9TdHJpbmciLCJvZmZzIiwib2Zmc2V0IiwicGFnZVgiLCJsZWZ0IiwicGFnZVkiLCJ0b3AiLCJib3R0b20iLCJjb25zdHJ1Y3RvciIsInZhbHVlQ2hhbmdlZCIsImdldEltYWdlV2lkdGgiLCJnZXRJbWFnZUhlaWdodCIsIkZvY3VzcG9pbnQiLCJjbGljayAucmVzZXQiLCJjbGljayAucHJvY2VlZCIsImNsaWNrIC5jYW5jZWwtdXBsb2FkIiwidXBsb2FkZXIiLCJtb2RhbCIsImNhbmNlbFVwbG9hZCIsImNyZWF0ZUluc3RydWN0aW9ucyIsImluc3RydWN0aW9ucyIsImVsIiwiRm9jdXNQb2ludEluc3RydWN0aW9ucyIsInByaW9yaXR5IiwiQ2FuY2VsVXBsb2FkIiwiUmVzZXQiLCJPa2F5Iiwic2V0RmlsZSIsImZpbGUiLCJmciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwicmVzZXQiLCJwcm9jZWVkIiwiY2xvc2UiLCJjcm9wQnRuSFRNTCIsIkVkaXRJbWFnZVNpemVzIiwiY3JvcExpbmtIVE1MIiwicm9ib2Nyb3BTdGF0ZUV4dGVuZCIsImNyZWF0ZVN0YXRlcyIsIl9wYXJlbnRDcmVhdGVTdGF0ZXMiLCJzdGF0ZXMiLCJzZWxlY3Rpb24iLCJJbWFnZURldGFpbHMiLCJfcGFyZW50UG9zdFJlbmRlciIsInBvc3RSZW5kZXIiLCJyb2JvY3JvcE9wZW4iLCJjb25zb2xlIiwibG9nIiwiYXR0YWNobWVudCIsIm9wZW4iLCJBdHRhY2htZW50IiwiRGV0YWlscyIsIl9wYXJlbnRSZW5kZXIiLCJpbnNlcnRBZnRlciIsImltYWdlSW5mb3MiLCJhc2tfZm9yX2ZvY3VzcG9pbnQiLCJVcGxvYWRlcldpbmRvdyIsIl9wYXJlbnRSZWFkeSIsImRpZFJlYWR5IiwiYXNrRm9jdXMiLCJmaWxlSXRlbSIsImFza01vZGFsIiwiZGlzcG9zZSIsImFza0ZvY3VzSW1hZ2VzIiwibGVuZ3RoIiwic2hpZnQiLCJkZXN0cm95IiwiYmxvYiIsInN0YXJ0IiwiYWRkQXNrRm9jdXMiLCJmaWxlRGF0YSIsInJlc29sdmVGaWxlIiwiX3JldCIsImdldE5hdGl2ZSIsImdldFNvdXJjZSIsImJpbmQiLCJ1cCIsImZpbGVzIiwiaSIsInR5cGUiLCJCbG9iIiwic3RvcCIsInNldHRpbmdzIiwibXVsdGlwYXJ0X3BhcmFtcyIsIkpTT04iLCJzdHJpbmdpZnkiXSwibWFwcGluZ3MiOiJDQUlBLFNBQUFBLEdBQ0EsR0FBQUMsRUFFQUEsSUFDQUMsbUJBQUEsU0FBQUMsRUFBQUMsR0FFQSxHQUFBQyxJQUFBRixFQUFBRyxXQUFBQyxFQUFBLEdBQUEsRUFBQUosRUFBQUssTUFDQUMsR0FBQSxFQUFBTixFQUFBRyxXQUFBSSxHQUFBLEVBQUFQLEVBQUFRLE9BQ0FDLEVBQUFDLEtBQUFDLElBQUFYLEVBQUFLLE1BQUFKLEVBQUFXLFVBQUFaLEVBQUFRLE9BQUFQLEVBQUFZLFlBQ0FDLEVBQUFiLEVBQUFXLFVBQUFILEVBQ0FNLEVBQUFkLEVBQUFZLFdBQUFKLEVBQ0FPLEVBQUFOLEtBQUFDLElBQUFELEtBQUFPLElBQUFmLEVBQUFZLEVBQUEsRUFBQSxHQUFBZCxFQUFBSyxNQUFBUyxHQUNBSSxFQUFBUixLQUFBQyxJQUFBRCxLQUFBTyxJQUFBWCxFQUFBUyxFQUFBLEVBQUEsR0FBQWYsRUFBQVEsT0FBQU8sRUFDQSxRQUNBSSxNQUFBbEIsRUFBQW1CLE1BQ0FoQixFQUFBWSxFQUFBaEIsRUFBQUssTUFDQUUsRUFBQVcsRUFBQWxCLEVBQUFRLE9BQ0FILE1BQUFTLEVBQUFkLEVBQUFLLE1BQ0FHLE9BQUFPLEVBQUFmLEVBQUFRLFNBSUFhLGVBQUEsU0FBQUMsRUFBQXRCLEdBQ0EsR0FBQXVCLEdBQUFDLElBQ0EsS0FBQUQsSUFBQUQsR0FDQSxPQUFBQyxHQUNBLElBQUEsSUFDQSxJQUFBLEtBQ0EsSUFBQSxLQUNBLElBQUEsUUFDQUMsRUFBQUQsR0FB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QUFBMVMsU0FFQTJRLEdBQUE3QixFQUFBNUcsU0FHQWhJLFNBSUFrTSIsImZpbGUiOiJ3cC1yb2JvY3JvcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwcmVzZXJ2ZSAoYykgMjAxNiBieSBKb2VybiBMdW5kXG4gKiBAbGljZW5zZSBHUEwzXG4gKi9cbihmdW5jdGlvbiggZXhwb3J0cyApe1xuXHR2YXIgcm9ib2Nyb3A7XG5cblx0cm9ib2Nyb3AgPSB7XG5cdFx0Y3JvcEZyb21Gb2N1c1BvaW50OiBmdW5jdGlvbiggaW1hZ2VpbmZvLCBjcm9waW5mbyApIHtcblx0XHRcdC8vIG5vcm1hbGl6ZSBcblx0XHRcdHZhciBmcF94ID0gICAoICBpbWFnZWluZm8uZm9jdXNwb2ludC54ICsgMSkgLyAyICogaW1hZ2VpbmZvLndpZHRoLFxuXHRcdFx0XHRmcF95ID0gICAoIC1pbWFnZWluZm8uZm9jdXNwb2ludC55ICsgMSkgLyAyICogaW1hZ2VpbmZvLmhlaWdodCxcblx0XHRcdFx0c2NhbGUgPSBNYXRoLm1pbiggaW1hZ2VpbmZvLndpZHRoIC8gY3JvcGluZm8ubWluX3dpZHRoLCBpbWFnZWluZm8uaGVpZ2h0IC8gY3JvcGluZm8ubWluX2hlaWdodCApLFxuXHRcdFx0XHRjcm9wX3cgPSBjcm9waW5mby5taW5fd2lkdGggKiBzY2FsZSxcblx0XHRcdFx0Y3JvcF9oID0gY3JvcGluZm8ubWluX2hlaWdodCAqIHNjYWxlLFxuXHRcdFx0XHRjcm9wX3ggPSBNYXRoLm1pbiggTWF0aC5tYXgoIGZwX3ggLSBjcm9wX3cgLyAyLCAwICkgLCBpbWFnZWluZm8ud2lkdGggLSBjcm9wX3cpLFxuXHRcdFx0XHRjcm9wX3kgPSBNYXRoLm1pbiggTWF0aC5tYXgoIGZwX3kgLSBjcm9wX2ggLyAyLCAwICkgLCBpbWFnZWluZm8uaGVpZ2h0IC0gY3JvcF9oKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWVzOiBjcm9waW5mby5zaXplcyxcblx0XHRcdFx0eDogY3JvcF94IC8gaW1hZ2VpbmZvLndpZHRoLFxuXHRcdFx0XHR5OiBjcm9wX3kgLyBpbWFnZWluZm8uaGVpZ2h0LFxuXHRcdFx0XHR3aWR0aDogY3JvcF93IC8gaW1hZ2VpbmZvLndpZHRoLFxuXHRcdFx0XHRoZWlnaHQ6IGNyb3BfaCAvIGltYWdlaW5mby5oZWlnaHRcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdHJlbFRvQWJzQ29vcmRzOiBmdW5jdGlvbiggY3JvcGRhdGEsIGltYWdlaW5mbyApIHtcblx0XHRcdHZhciBzLCByZXQgPSB7fTtcblx0XHRcdGZvciAoIHMgaW4gY3JvcGRhdGEgKSB7XG5cdFx0XHRcdHN3aXRjaCAoIHMgKSB7XG5cdFx0XHRcdFx0Y2FzZSAneCc6XG5cdFx0XHRcdFx0Y2FzZSAneDEnOlxuXHRcdFx0XHRcdGNhc2UgJ3gyJzpcblx0XHRcdFx0XHRjYXNlICd3aWR0aCc6XG5cdFx0XHRcdFx0XHRyZXRbc10gPSBjcm9wZGF0YVtzXSAqIGltYWdlaW5mby53aWR0aFxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAneSc6XG5cdFx0XHRcdFx0Y2FzZSAneTEnOlxuXHRcdFx0XHRcdGNhc2UgJ3kyJzpcblx0XHRcdFx0XHRjYXNlICdoZWlnaHQnOlxuXHRcdFx0XHRcdFx0cmV0W3NdID0gY3JvcGRhdGFbc10gKiBpbWFnZWluZm8uaGVpZ2h0XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0W3NdID0gY3JvcGRhdGFbc107XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdGFic1RvUmVsQ29vcmRzOiBmdW5jdGlvbiggY3JvcGRhdGEsIGltYWdlaW5mbyApIHtcblx0XHRcdHZhciBzLCByZXQgPSB7fTtcblx0XHRcdGZvciAoIHMgaW4gY3JvcGRhdGEgKSB7XG5cdFx0XHRcdHN3aXRjaCAoIHMgKSB7XG5cdFx0XHRcdFx0Y2FzZSAneCc6XG5cdFx0XHRcdFx0Y2FzZSAneDEnOlxuXHRcdFx0XHRcdGNhc2UgJ3gyJzpcblx0XHRcdFx0XHRjYXNlICd3aWR0aCc6XG5cdFx0XHRcdFx0XHRyZXRbc10gPSBjcm9wZGF0YVtzXSAvIGltYWdlaW5mby53aWR0aFxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAneSc6XG5cdFx0XHRcdFx0Y2FzZSAneTEnOlxuXHRcdFx0XHRcdGNhc2UgJ3kyJzpcblx0XHRcdFx0XHRjYXNlICdoZWlnaHQnOlxuXHRcdFx0XHRcdFx0cmV0W3NdID0gY3JvcGRhdGFbc10gLyBpbWFnZWluZm8uaGVpZ2h0XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0W3NdID0gY3JvcGRhdGFbc107XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXG5cdFx0cG9pbnRUb1JlY3RDb29yZHM6ZnVuY3Rpb24oIHBvaW50cyApIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHg6IHBvaW50cy54MSxcblx0XHRcdFx0eTogcG9pbnRzLnkxLFxuXHRcdFx0XHR3aWR0aDogIHBvaW50cy54MiAtIHBvaW50cy54MSxcblx0XHRcdFx0aGVpZ2h0OiBwb2ludHMueTIgLSBwb2ludHMueTFcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0cmVjdFRvUG9pbnRDb29yZHM6ZnVuY3Rpb24oIHJlY3QgKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR4MTogcmVjdC54LFxuXHRcdFx0XHR5MTogcmVjdC55LFxuXHRcdFx0XHR4MjogKHJlY3QubWF4WCA/IHJlY3QubWF4WCA6IHJlY3QueCtyZWN0LndpZHRoKSxcblx0XHRcdFx0eTI6IChyZWN0Lm1heFkgPyByZWN0Lm1heFkgOiByZWN0LnkrcmVjdC5oZWlnaHQpLFxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0dmlldyA6IHt9LFxuXHRcdGNvbnRyb2xsZXIgOiB7fVxuXHR9O1xuXG5cdGV4cG9ydHMubWVkaWEucm9ib2Nyb3AgPSByb2JvY3JvcDtcbn0pKCB3cCApOyIsIihmdW5jdGlvbih3cCwkKSB7XG5cblx0dmFyIGltYWdlX3JhdGlvc1x0XHQ9IHdpbmRvdy53cF9yb2JvY3JvcC5pbWFnZV9yYXRpb3MsXG5cdFx0aW1hZ2Vfc2l6ZXNcdFx0XHQ9IHdpbmRvdy53cF9yb2JvY3JvcC5pbWFnZV9zaXplcyxcblx0XHRsMTBuXHRcdFx0XHQ9IHdpbmRvdy53cF9yb2JvY3JvcC5sMTBuLFxuXHRcdG9wdGlvbnNcdFx0XHRcdD0gd2luZG93LndwX3JvYm9jcm9wLm9wdGlvbnM7XG5cblxuXHQvKipcblx0ICpcdEFuIEltYWdlXG5cdCAqL1xuXHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3LkltZyA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0XHRjbGFzc05hbWU6J2F0dGFjaG1lbnQtaW1hZ2UnLFxuXHRcdHRhZ05hbWU6J2ltZycsXG5cdFx0aWQ6J3JvYm9jcm9wLWltYWdlJyxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdF8uZGVmYXVsdHMoIHRoaXMub3B0aW9ucywge3NyYzonJ30gKTtcblx0XHRcdHRoaXMuJGVsLm9uKCdsb2FkJyxmdW5jdGlvbigpe1xuXHRcdFx0XHRzZWxmLndpZHRoID0gc2VsZi4kZWwuZ2V0KDApLm5hdHVyYWxXaWR0aDtcblx0XHRcdFx0c2VsZi5oZWlnaHQgPSBzZWxmLiRlbC5nZXQoMCkubmF0dXJhbEhlaWdodDtcblx0XHRcdFx0c2VsZi5yYXRpbyA9IHNlbGYud2lkdGggLyBzZWxmLmhlaWdodDtcblx0XHRcdFx0c2VsZi50cmlnZ2VyKCdsb2FkJyxzZWxmKTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy4kZWwuYXR0cignc3JjJywgdGhpcy5vcHRpb25zLnNyYyApO1xuXHRcdH0sXG5cdFx0Z2V0U3JjOiBmdW5jdGlvbihzcmMpIHtcblx0XHRcdHJldHVybiB0aGlzLiRlbC5hdHRyKCAnc3JjJyApO1xuXHRcdH0sXG5cdFx0c2V0U3JjOiBmdW5jdGlvbihzcmMpIHtcblx0XHRcdCEhc3JjICYmIHRoaXMuJGVsLmF0dHIoICdzcmMnLCBzcmMgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fSk7XG5cblxuXHQvKipcblx0ICpcdFJhdGlvIHNlbGVjdCBsaXN0XG5cdCAqL1xuXHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3LlJvYm9jcm9wUmF0aW9TZWxlY3QgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG5cdFx0Y2xhc3NOYW1lOiAncm9ib2Nyb3Atc2VsZWN0Jyxcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ3JvYm9jcm9wLXNlbGVjdCcpLFxuXHRcdGV2ZW50czoge1xuXHRcdFx0J2NsaWNrIFtuYW1lPVwicm9ib2Nyb3Atc2VsZWN0LXJhdGlvXCJdJzogJ3NlbGVjdFJhdGlvJyxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0d3AuQmFja2JvbmUuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHRfLmRlZmF1bHRzKHtcblx0XHRcdFx0cmF0aW9zOnt9LFxuXHRcdFx0XHR0b29sczp7fVxuXHRcdFx0fSx0aGlzLm9wdGlvbnMpO1xuXHRcdFx0dGhpcy5vcHRpb25zLmwxMG4gPSBsMTBuO1xuXHRcdFx0XG5cdFx0fSxcblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0d3AuQmFja2JvbmUuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFxuXHRcdFx0Xy5lYWNoKCB0aGlzLm9wdGlvbnMudG9vbHMsIGZ1bmN0aW9uKCB0b29sLCBrZXkgKSB7XG5cdFx0XHRcdHNlbGYudmlld3MuYWRkKG5ldyB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LlJvYm9jcm9wUmF0aW9TZWxlY3RJdGVtKHtcblx0XHRcdFx0XHRyYXRpb2tleTpcdGtleSxcblx0XHRcdFx0XHRzaXplbmFtZXM6XHRmYWxzZSxcblx0XHRcdFx0XHRyYXRpbzogXHRcdGtleSxcblx0XHRcdFx0XHR0aXRsZTpcdFx0dG9vbC50aXRsZSxcblx0XHRcdFx0XHRlbmFibGVkOiBcdHRydWVcblx0XHRcdFx0fSkpXG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0XHRfLmVhY2goIHRoaXMub3B0aW9ucy5yYXRpb3MsIGZ1bmN0aW9uKCByYXRpbywga2V5ICkge1xuXHRcdFx0XHR2YXIgbmFtZXMgPSBbXSxcblx0XHRcdFx0XHR0cGxfc3RyID0gJzxzcGFuIGNsYXNzPVwic2l6ZW5hbWU8JT0gY2FuY3JvcCA/IFwiXCIgOiBcIiBkaXNhYmxlZFwiICU+XCI+PCU9IG5hbWUgJT4gKDwlPSB3aWR0aCAlPsOXPCU9IGhlaWdodCAlPik8L3NwYW4+Jyxcblx0XHRcdFx0XHRuYW1lX3RwbCA9IF8udGVtcGxhdGUodHBsX3N0cik7XG5cdFx0XHRcdF8uZWFjaCggcmF0aW8uc2l6ZXMsIGZ1bmN0aW9uKHNpemVuYW1lLGtleSkge1xuXHRcdFx0XHRcdHZhciBzaXplID0gJC5leHRlbmQoIHRydWUsIHtcblx0XHRcdFx0XHRcdGNhbmNyb3AgOlx0KHNlbGYubW9kZWwuZ2V0KCd3aWR0aCcpID49IGltYWdlX3NpemVzW3NpemVuYW1lXS53aWR0aCkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdChzZWxmLm1vZGVsLmdldCgnaGVpZ2h0JykgPj0gaW1hZ2Vfc2l6ZXNbc2l6ZW5hbWVdLmhlaWdodClcblx0XHRcdFx0XHR9LCBpbWFnZV9zaXplc1tzaXplbmFtZV0pO1xuXHRcdFx0XHRcdGlmICggc2l6ZS5jcm9wICkge1xuXHRcdFx0XHRcdFx0bmFtZXMucHVzaCggbmFtZV90cGwoIHNpemUgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNlbGYudmlld3MuYWRkKG5ldyB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LlJvYm9jcm9wUmF0aW9TZWxlY3RJdGVtKHtcblx0XHRcdFx0XHRyYXRpb2tleTpcdGtleSxcblx0XHRcdFx0XHRzaXplbmFtZXM6XHRuYW1lcy5qb2luKCcnKSxcblx0XHRcdFx0XHRyYXRpbzogXHRcdGtleSxcblx0XHRcdFx0XHR0aXRsZTpcdFx0a2V5ICsgJyA6IDEnLFxuXHRcdFx0XHRcdGVuYWJsZWQ6IFx0KHNlbGYubW9kZWwuZ2V0KCd3aWR0aCcpICA+PSByYXRpby5taW5fd2lkdGgpICYmXG5cdFx0XHRcdFx0XHRcdFx0KHNlbGYubW9kZWwuZ2V0KCdoZWlnaHQnKSA+PSByYXRpby5taW5faGVpZ2h0KVxuXHRcdFx0XHR9KSlcblx0XHRcdH0gKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0fSxcblx0XHRzZXRTZWxlY3RlZDogZnVuY3Rpb24oIHJhdGlva2V5ICkge1xuXHRcdFx0dGhpcy4kZWwuZmluZCgnW25hbWU9XCJyb2JvY3JvcC1zZWxlY3QtcmF0aW9cIl1bdmFsdWU9XCInK3JhdGlva2V5KydcIl0nKS5wcm9wKCdjaGVja2VkJyx0cnVlKTtcblx0XHRcdHRoaXMuc2VsZWN0UmF0aW8oKTtcblx0XHR9LFxuXHRcdGdldFNlbGVjdGVkOiBmdW5jdGlvbiggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy4kZWwuZmluZCgnW25hbWU9XCJyb2JvY3JvcC1zZWxlY3QtcmF0aW9cIl06Y2hlY2tlZCcpLnZhbCgpO1xuXHRcdH0sXG5cdFx0c2VsZWN0UmF0aW86IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnJhdGlvc1sgdGhpcy5nZXRTZWxlY3RlZCgpIF0gKSB7XG5cdFx0XHRcdHRoaXMudHJpZ2dlcignc2VsZWN0LXJhdGlvJyk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMudG9vbHNbIHRoaXMuZ2V0U2VsZWN0ZWQoKSBdICkge1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3NlbGVjdC10b29sJyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3NlbGVjdCcpO1xuXHRcdH1cblx0fSk7XG5cblx0LyoqXG5cdCAqXHRSYXRpbyBzZWxlY3QgbGlzdCBJdGVtXG5cdCAqL1xuXHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3LlJvYm9jcm9wUmF0aW9TZWxlY3RJdGVtID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdGNsYXNzTmFtZTogJ3JvYm9jcm9wLXNlbGVjdC1pdGVtJyxcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ3JvYm9jcm9wLXNlbGVjdC1pdGVtJyksXG5cdFx0c2l6ZWtleTonJyxcblx0XHRzaXplbmFtZXM6JycsXG5cdFx0cmF0aW86MCxcblx0XHRlbmFibGVkOm51bGwsXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdHdwLkJhY2tib25lLlZpZXcucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRlbC5maW5kKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKS5wcm9wKCdkaXNhYmxlZCcsICEgdGhpcy5vcHRpb25zLmVuYWJsZWQgKVxuXHRcdH1cblx0fSk7XG5cblx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5Sb2JvY3JvcEltYWdlID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdGNsYXNzTmFtZTpcdFx0J2ltYWdlLXJvYm9jcm9wJyxcblx0XHR0ZW1wbGF0ZTpcdFx0d3AudGVtcGxhdGUoJ3JvYm9jcm9wJyksXG5cdFx0aW1hZ2VfcmF0aW9zOlx0aW1hZ2VfcmF0aW9zLFxuXHRcdGltYWdlX3NpemVzOlx0aW1hZ2Vfc2l6ZXMsXG5cdFx0X2Nyb3BwZXJzOlx0XHRudWxsLFxuXHRcdGV2ZW50czoge1xuXHRcdFx0J2NsaWNrIC5yb2JvY3JvcC1hdXRvY3JvcC1jdXJyZW50J1x0OiAnYXV0b2Nyb3AnLFxuXHRcdFx0J2NsaWNrIC5yb2JvY3JvcC1hdXRvY3JvcC1hbGwnXHRcdDogJ2F1dG9jcm9wQWxsJyxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdC8vXHR3cC5tZWRpYS52aWV3LkVkaXRJbWFnZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR0aGlzLl9jcm9wcGVycyBcdFx0PSB7fTtcblx0XHRcdHRoaXMuaW1hZ2UgXHRcdFx0PSBuZXcgd3AubWVkaWEucm9ib2Nyb3Audmlldy5JbWcoIHtzcmM6IHRoaXMubW9kZWwuZ2V0KCd1cmwnKSB9ICk7XG5cblx0XHRcdHRoaXMuY29udHJvbGxlciBcdD0gb3B0aW9ucy5jb250cm9sbGVyO1xuXHRcdFx0dGhpcy5mb2N1c3BvaW50dG9vbFx0PSBuZXcgd3AubWVkaWEucm9ib2Nyb3Audmlldy5mb2N1c3BvaW50LkltYWdlRm9jdXNQb2ludFNlbGVjdCh7IGltYWdlOiB0aGlzLmltYWdlLCBmb2N1c3BvaW50OiB7eDowLHk6MH0sIHNyYzogdGhpcy5tb2RlbC5nZXQoJ3VybCcpIH0pO1xuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy5mb2N1c3BvaW50dG9vbCwgJ2NoYW5nZWQnLCB0aGlzLnVwZGF0ZUZvY3VzUG9pbnQgKTtcblx0XHRcdFxuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fSxcblx0XHRkaXNtaXNzOmZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGFyZWFTZWxlY3QgPSB0aGlzLiRhcmVhU2VsZWN0KClcblx0XHRcdGFyZWFTZWxlY3QgJiYgYXJlYVNlbGVjdC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuJGVsLnJlbW92ZSgpO1xuXHRcdH0sXG5cdFx0Y3JlYXRlU2VsZWN0OiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc2VsZWN0ID0gbmV3IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuUm9ib2Nyb3BSYXRpb1NlbGVjdCh7XG5cdFx0XHRcdGNob2ljZXM6IGNob2ljZXNcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0aGFzQ2hhbmdlZDogZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMudHJpZ2dlciggJ2NoYW5nZWQnICk7XG5cdFx0fSxcblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLnZpZXdzLnNldCgnLnJvYm9jcm9wLWNvbnRlbnQnLCB0aGlzLmZvY3VzcG9pbnR0b29sICk7XG5cblx0XHRcdHRoaXMuZm9jdXNwb2ludHRvb2wuc2V0Rm9jdXNwb2ludCggdGhpcy5tb2RlbC5nZXQoICdmb2N1c3BvaW50JyApICk7XG5cblx0XHRcdHRoaXMuaW1hZ2UuJGVsLmltZ0FyZWFTZWxlY3Qoe1xuXHRcdFx0XHRwYXJlbnQ6IFx0XHR0aGlzLmltYWdlLiRlbC5jbG9zZXN0KCcucm9ib2Nyb3AtaW1hZ2UtYm94JyksXG5cdFx0XHRcdGluc3RhbmNlOlx0IFx0dHJ1ZSxcblx0XHRcdFx0aGFuZGxlczogXHRcdHRydWUsXG5cdFx0XHRcdGtleXM6IFx0XHRcdHRydWUsXG5cdFx0XHRcdHBlcnNpc3RlbnQ6XHRcdHRydWUsXG5cdFx0XHRcdGVuYWJsZWQ6XHRcdHRydWUsXG5cdFx0XHRcdG1vdmFibGU6XHRcdHRydWUsXG5cdFx0XHRcdHJlc2l6YWJsZTpcdFx0dHJ1ZSxcblx0XHRcdFx0aW1hZ2VIZWlnaHQ6XHR0aGlzLm1vZGVsLmdldCgnaGVpZ2h0JyksXG5cdFx0XHRcdGltYWdlV2lkdGg6XHRcdHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpLFxuXHRcdFx0XHRvblNlbGVjdEVuZDogZnVuY3Rpb24oIGltYWdlLCBjb29yZHMgKSB7XG5cdFx0XHRcdFx0dmFyIGNyb3BkYXRhID0gd3AubWVkaWEucm9ib2Nyb3AucG9pbnRUb1JlY3RDb29yZHMoIGNvb3JkcyApXG5cdFx0XHRcdFx0c2VsZi5fc2V0Q3JvcFNpemVzKGNyb3BkYXRhKTtcblx0XHRcdFx0XHRzZWxmLmhhc0NoYW5nZWQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHNldCByYXRpbyBzZWVsY3Rcblx0XHRcdHRoaXMuc2VsZWN0UmF0aW8gPSBuZXcgd3AubWVkaWEucm9ib2Nyb3Audmlldy5Sb2JvY3JvcFJhdGlvU2VsZWN0KHtcblx0XHRcdFx0dG9vbHM6IHtcblx0XHRcdFx0XHRmb2N1c3BvaW50IDoge1xuXHRcdFx0XHRcdFx0dGl0bGU6IGwxMG4uU2V0Rm9jdXNQb2ludCxcblx0XHRcdFx0XHRcdHRyaWdnZXI6ICdmb2N1c3BvaW50J1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmF0aW9zOnRoaXMuaW1hZ2VfcmF0aW9zLFxuXHRcdFx0XHRtb2RlbDp0aGlzLm1vZGVsXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuc2VsZWN0UmF0aW9cblx0XHRcdFx0Lm9uKCdzZWxlY3QtcmF0aW8nLCB0aGlzLm9uc2VsZWN0cmF0aW8sIHRoaXMgKVxuXHRcdFx0XHQub24oJ3NlbGVjdC10b29sJywgdGhpcy5vbnNlbGVjdHRvb2wsIHRoaXMgKVxuXHRcdFx0XHQub24oJ3NlbGVjdCcsIHRoaXMudXBkYXRlQnV0dG9ucywgdGhpcyApO1xuXG5cdFx0XHR0aGlzLnZpZXdzLnNldCgnLnNlbGVjdC1yYXRpbycsIHRoaXMuc2VsZWN0UmF0aW8gKTtcdFxuXHRcdFx0Ly8gc2V0VGltZW91dCggZnVuY3Rpb24oKXsgfSwyMCk7XG5cdFx0XHRcblx0XHRcdC8vIGJ1dHRvbnNcblx0XHRcdHRoaXMuJGF1dG9CdXR0b25cdD0gdGhpcy4kZWwuZmluZCgnLnJvYm9jcm9wLWF1dG9jcm9wLWN1cnJlbnQnKTtcblx0XHRcdHRoaXMuJGF1dG9BbGxCdXR0b25cdD0gdGhpcy4kZWwuZmluZCgnLnJvYm9jcm9wLWF1dG9jcm9wLWFsbCcpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY3VycmVudFJhdGlvLCBmb3VuZDtcblx0XHRcdHdwLm1lZGlhLnZpZXcuRWRpdEltYWdlLnByb3RvdHlwZS5yZWFkeS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cblx0XHRcdGlmICggISBfLmlzVW5kZWZpbmVkKCB0aGlzLm9wdGlvbnMuc2l6ZVRvU2VsZWN0ICkgKSB7XG5cdFx0XHRcdGZvdW5kID0gXy5maW5kKCB0aGlzLmltYWdlX3JhdGlvcywgZnVuY3Rpb24oIHJhdGlvICl7XG5cdFx0XHRcdFx0cmV0dXJuIHJhdGlvLnNpemVzLmluZGV4T2YoIHRoaXMub3B0aW9ucy5zaXplVG9TZWxlY3QgKSA+IC0xO1xuXHRcdFx0XHR9LCB0aGlzICk7XG5cdFx0XHRcdGlmICggZm91bmQgKSB7XG5cdFx0XHRcdFx0Y3VycmVudFJhdGlvID0gZm91bmQubmFtZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIF8uaXNVbmRlZmluZWQoIGN1cnJlbnRSYXRpbyApICkge1xuXHRcdFx0XHRjdXJyZW50UmF0aW8gPSAnZm9jdXNwb2ludCc7Ly9fLmZpcnN0KF8ua2V5cyggdGhpcy5pbWFnZV9yYXRpb3MgKSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNlbGVjdFJhdGlvLnNldFNlbGVjdGVkKCBjdXJyZW50UmF0aW8gKTsgXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHNhdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0YXR0YWNobWVudHM6e31cblx0XHRcdFx0fSwgaWQgPSB0aGlzLm1vZGVsLmdldCgnaWQnKSxcblx0XHRcdFx0JGJ0bnMgPSB0aGlzLiRhdXRvQWxsQnV0dG9uLmFkZCggdGhpcy4kYXV0b0J1dHRvbiApLnByb3AoICdkaXNhYmxlZCcsIHRydWUgKSxcblx0XHRcdFx0c2VsZiA9IHRoaXM7XG5cdFx0XHRkYXRhLmF0dGFjaG1lbnRzW2lkXSA9IHsgXG5cdFx0XHRcdHNpemVzOlx0XHR0aGlzLm1vZGVsLmdldCgnc2l6ZXMnKSwgXG5cdFx0XHRcdGZvY3VzcG9pbnQ6IHRoaXMubW9kZWwuZ2V0KCdmb2N1c3BvaW50Jylcblx0XHRcdH07XG5cdFx0XHR0aGlzLm1vZGVsLnNhdmVDb21wYXQoIGRhdGEsIHt9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3AgKSB7XG5cdFx0XHRcdHZhciBkID0gbmV3IERhdGUoKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIGZvcmNlIHJlbG9hZCBpbWFnZSAuLi5cblx0XHRcdFx0Xy5lYWNoKCBzZWxmLm1vZGVsLmF0dHJpYnV0ZXMuc2l6ZXMsIGZ1bmN0aW9uKCBzaXplLCBzaXplbmFtZSApIHtcblx0XHRcdFx0XHR2YXIgc2VsZWN0b3IgPSAgJ2ltZ1tzcmNePVwiJytzaXplLnVybCsnXCJdJyxcblx0XHRcdFx0XHRcdHJlZnJlc2ggPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUF0dHIoJ3NyYycpLmF0dHIoICdzcmMnLCBzaXplLnVybCsnPycrZC5nZXRUaW1lKCkgKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJlZnJlc2hfbWNlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVBdHRyKCdkYXRhLW1jZS1zcmMnKS5hdHRyKCAnZGF0YS1tY2Utc3JjJywgc2l6ZS51cmwrJz8nK2QuZ2V0VGltZSgpICk7XG5cdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvLyAuLi4gdW5sZXNzIGl0J3MgZnVsbHNpemUgLi4uXG5cdFx0XHRcdFx0aWYgKCBzaXplbmFtZSAhPT0gJ2Z1bGwnICkge1xuXG5cdFx0XHRcdFx0XHQkKGRvY3VtZW50KS5hZGQoICQoJ2lmcmFtZScpLmNvbnRlbnRzKCkgKVxuXHRcdFx0XHRcdFx0XHQuZmluZCggc2VsZWN0b3IgKVxuXHRcdFx0XHRcdFx0XHQuZWFjaCggcmVmcmVzaCApO1xuXG5cdFx0XHRcdFx0XHQvLyAuLi4gaW5zaWRlIHRpbnltY2UgaWZyYW1lc1xuXHRcdFx0XHRcdFx0JCgnLm1jZS1lZGl0LWFyZWEgaWZyYW1lJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLmNvbnRlbnRzKClcblx0XHRcdFx0XHRcdFx0XHQuZmluZCggc2VsZWN0b3IgKVxuXHRcdFx0XHRcdFx0XHRcdC5lYWNoKCByZWZyZXNoIClcblx0XHRcdFx0XHRcdFx0XHQuZWFjaCggcmVmcmVzaF9tY2UgKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgc2VsZiApO1xuXHRcdFx0XHQkYnRucy5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuXHRcdFx0XHRzZWxmLnRyaWdnZXIoICdzYXZlZCcgKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHR1cGRhdGVCdXR0b25zOiBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIHRvb2xrZXkgPSB0aGlzLnNlbGVjdFJhdGlvLmdldFNlbGVjdGVkKCk7XG5cdFx0XHR0aGlzLiRhdXRvQnV0dG9uLnRvZ2dsZUNsYXNzKCAnaGlkZGVuJywgdG9vbGtleSA9PT0gJ2ZvY3VzcG9pbnQnICk7XG5cdFx0XHR0aGlzLiRhdXRvQWxsQnV0dG9uLnRvZ2dsZUNsYXNzKCAnaGlkZGVuJywgdG9vbGtleSAhPT0gJ2ZvY3VzcG9pbnQnICk7XG5cdFx0fSxcblx0XHRvbnNlbGVjdHRvb2w6IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgdG9vbGtleSA9IHRoaXMuc2VsZWN0UmF0aW8uZ2V0U2VsZWN0ZWQoKTtcblx0XHRcdHRoaXMuJGFyZWFTZWxlY3QoKS5jYW5jZWxTZWxlY3Rpb24oKTtcblxuXHRcdFx0c3dpdGNoICggdG9vbGtleSApIHtcblx0XHRcdFx0Y2FzZSAnZm9jdXNwb2ludCc6XG5cdFx0XHRcdFx0Ly8gd3JhcCBhcm91bmRcblx0XHRcdFx0XHR0aGlzLmZvY3VzcG9pbnR0b29sLnNldEVuYWJsZWQoIHRydWUgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9uc2VsZWN0cmF0aW86IGZ1bmN0aW9uKCApIHtcblx0XHRcdHRoaXMuZm9jdXNwb2ludHRvb2wuc2V0RW5hYmxlZCggZmFsc2UgKTtcblxuXHRcdFx0LyoqXG5cdFx0XHQgKlx0T24gc3dpdGNoIHJhdGlvXG5cdFx0XHQgKi9cblx0XHRcdHZhciByYXRpb2tleSA9IHRoaXMuc2VsZWN0UmF0aW8uZ2V0U2VsZWN0ZWQoKSxcblx0XHRcdFx0c2l6ZXMgPSB0aGlzLm1vZGVsLmdldCgnc2l6ZXMnKSxcblx0XHRcdFx0ZmFjdG9yLCByZWN0LCBjcm9wZGF0YSwgc2VsZiA9IHRoaXMsIFxuXHRcdFx0XHRzLCBhcmVhU2VsZWN0T3B0aW9ucyxcblx0XHRcdFx0aW1nV2lkdGggID0gdGhpcy5tb2RlbC5nZXQoJ3dpZHRoJyksIFxuXHRcdFx0XHRpbWdIZWlnaHQgPSB0aGlzLm1vZGVsLmdldCgnaGVpZ2h0Jyk7XG5cblx0XHRcdHRoaXMuY3VycmVudF9yYXRpbyA9IHRoaXMuaW1hZ2VfcmF0aW9zW3JhdGlva2V5XTtcblxuXHRcdFx0YXJlYVNlbGVjdE9wdGlvbnMgPSB7XG5cdFx0XHRcdGFzcGVjdFJhdGlvOlx0dGhpcy5jdXJyZW50X3JhdGlvLnJhdGlvICsgJzoxJyxcblx0XHRcdFx0bWluV2lkdGg6XHRcdHRoaXMuY3VycmVudF9yYXRpby5taW5fd2lkdGgsXG5cdFx0XHRcdG1pbkhlaWdodDpcdFx0dGhpcy5jdXJyZW50X3JhdGlvLm1pbl9oZWlnaHRcblx0XHRcdH07XG5cblx0XHRcdF8uZWFjaCh0aGlzLmN1cnJlbnRfcmF0aW8uc2l6ZXMsIGZ1bmN0aW9uKHNpemUpe1xuXHRcdFx0XHRpZiAoICEgY3JvcGRhdGEgJiYgISEgc2l6ZXNbc2l6ZV0gJiYgISEgc2l6ZXNbc2l6ZV0uY3JvcGRhdGEgKSB7XG5cdFx0XHRcdFx0Y3JvcGRhdGEgPSBzaXplc1tzaXplXS5jcm9wZGF0YTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGltYWdlX3NpemVzW3NpemVdLndpZHRoIDw9IGltZ1dpZHRoICYmIGltYWdlX3NpemVzW3NpemVdLmhlaWdodCA8PSBpbWdIZWlnaHQgKSB7XG5cdFx0XHRcdFx0YXJlYVNlbGVjdE9wdGlvbnMubWluV2lkdGggID0gTWF0aC5tYXgoIGFyZWFTZWxlY3RPcHRpb25zLm1pbldpZHRoLCAgaW1hZ2Vfc2l6ZXNbc2l6ZV0ud2lkdGggKTtcblx0XHRcdFx0XHRhcmVhU2VsZWN0T3B0aW9ucy5taW5IZWlnaHQgPSBNYXRoLm1heCggYXJlYVNlbGVjdE9wdGlvbnMubWluSGVpZ2h0LCBpbWFnZV9zaXplc1tzaXplXS5oZWlnaHQgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmICggIWNyb3BkYXRhICkge1xuXHRcdFx0XHQvLyB3cCBkZWZhdWx0IGNyb3BkYXRhXG5cdFx0XHRcdHZhciBzY2FsZSA9IE1hdGgubWluKCB0aGlzLm1vZGVsLmdldCgnd2lkdGgnKSAvIHRoaXMuY3VycmVudF9yYXRpby5yYXRpbywgdGhpcy5tb2RlbC5nZXQoJ2hlaWdodCcpKTtcblx0XHRcdFx0XG5cdFx0XHRcdHJlY3QgPSB7XG5cdFx0XHRcdFx0eDowLFxuXHRcdFx0XHRcdHk6MCxcblx0XHRcdFx0XHR3aWR0aDogIHNjYWxlICogdGhpcy5jdXJyZW50X3JhdGlvLnJhdGlvLFxuXHRcdFx0XHRcdGhlaWdodDogc2NhbGVcblx0XHRcdFx0fTtcblx0XHRcdFx0cmVjdC54ID0gKHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpIC0gcmVjdC53aWR0aCkvMjtcblx0XHRcdFx0cmVjdC55ID0gKHRoaXMubW9kZWwuZ2V0KCdoZWlnaHQnKSAtIHJlY3QuaGVpZ2h0KS8yO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVjdCA9IHt9O1xuXHRcdFx0XHRcblx0XHRcdFx0Xy5leHRlbmQocmVjdCxjcm9wZGF0YSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuJGFyZWFTZWxlY3QoKS5zZXRPcHRpb25zKCBhcmVhU2VsZWN0T3B0aW9ucyApO1xuXHRcdFx0aWYgKCAhIHRoaXMuaW1hZ2UuJGVsLmdldCgwKS5jb21wbGV0ZSApIHtcblx0XHRcdFx0dGhpcy5pbWFnZS4kZWwub24oJ2xvYWQnLGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuc2VsZWN0Q3JvcChyZWN0KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNlbGVjdENyb3AocmVjdCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGF1dG9jcm9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHQvLyBjcm9wIGJ5IGZvY3VzIHBvaW50XG5cdFx0XHRcblx0XHRcdHZhciBjcm9wZGF0YSwgaW1hZ2VpbmZvID0ge1xuXHRcdFx0XHRcdHdpZHRoOlx0XHR0aGlzLm1vZGVsLmdldCgnd2lkdGgnKSxcblx0XHRcdFx0XHRoZWlnaHQ6XHRcdHRoaXMubW9kZWwuZ2V0KCdoZWlnaHQnKSxcblx0XHRcdFx0XHRmb2N1c3BvaW50Olx0dGhpcy5tb2RlbC5nZXQoJ2ZvY3VzcG9pbnQnKVxuXHRcdFx0XHR9O1xuXHRcdFx0Y3JvcGRhdGEgPSB3cC5tZWRpYS5yb2JvY3JvcC5jcm9wRnJvbUZvY3VzUG9pbnQoIGltYWdlaW5mbywgdGhpcy5jdXJyZW50X3JhdGlvICk7XG5cdFx0XHRjcm9wZGF0YSA9IHdwLm1lZGlhLnJvYm9jcm9wLnJlbFRvQWJzQ29vcmRzKCBjcm9wZGF0YSwgaW1hZ2VpbmZvICk7XG5cblx0XHRcdHRoaXMuX3NldENyb3BTaXplcyggY3JvcGRhdGEgKTtcblx0XHRcdHRoaXMuc2VsZWN0Q3JvcCggY3JvcGRhdGEgKTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRhdXRvY3JvcEFsbDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRpbWFnZWluZm8gPSB7XG5cdFx0XHRcdFx0d2lkdGg6XHRcdHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpLFxuXHRcdFx0XHRcdGhlaWdodDpcdFx0dGhpcy5tb2RlbC5nZXQoJ2hlaWdodCcpLFxuXHRcdFx0XHRcdGZvY3VzcG9pbnQ6XHR0aGlzLm1vZGVsLmdldCgnZm9jdXNwb2ludCcpXG5cdFx0XHRcdH07XG5cblx0XHRcdF8uZWFjaCggdGhpcy5pbWFnZV9yYXRpb3MsIGZ1bmN0aW9uKCByYXRpbyApIHtcblx0XHRcdFx0dmFyIGNyb3BkYXRhO1xuXHRcdFx0XHRjcm9wZGF0YSA9IHdwLm1lZGlhLnJvYm9jcm9wLmNyb3BGcm9tRm9jdXNQb2ludCggaW1hZ2VpbmZvLCByYXRpbyApO1xuXHRcdFx0XHRjcm9wZGF0YSA9IHdwLm1lZGlhLnJvYm9jcm9wLnJlbFRvQWJzQ29vcmRzKCBjcm9wZGF0YSwgaW1hZ2VpbmZvICk7XG5cdFx0XHRcdHNlbGYuX3NldENyb3BTaXplcyggY3JvcGRhdGEsIHJhdGlvICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2VsZWN0Q3JvcDpmdW5jdGlvbiggcmVjdCApIHtcblx0XHRcdC8vIGRyYXcgY3JvcCBVSSBlbGVtZW50LlxuXHRcdFx0dmFyIGZhY3RvciA9IHRoaXMuX2ltYWdlX3NjYWxlX2ZhY3RvcigpLFxuXHRcdFx0XHRwb2ludHMgPSB3cC5tZWRpYS5yb2JvY3JvcC5yZWN0VG9Qb2ludENvb3JkcyggcmVjdCApLFxuXHRcdFx0XHQkYXJlYVNlbGVjdCA9IHRoaXMuJGFyZWFTZWxlY3QoKTtcblx0XHRcdFxuXHRcdFx0JGFyZWFTZWxlY3Quc2V0U2VsZWN0aW9uKCBwb2ludHMueDEsIHBvaW50cy55MSwgcG9pbnRzLngyLCBwb2ludHMueTIsIGZhbHNlICk7XG5cdFx0XHQkYXJlYVNlbGVjdC5zZXRPcHRpb25zKCB7c2hvdzp0cnVlfSApO1xuXHRcdFx0JGFyZWFTZWxlY3QudXBkYXRlKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdCRhcmVhU2VsZWN0IDogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiB0aGlzLmltYWdlLiRlbC5kYXRhKCdpbWdBcmVhU2VsZWN0Jyk7XG5cdFx0fSxcblx0XHRfaW1hZ2Vfc2NhbGVfZmFjdG9yIDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJGNvbnRhaW5lciA9IHRoaXMuaW1hZ2UuJGVsLmNsb3Nlc3QoJy5yb2JvY3JvcC1pbWFnZS1ib3gnKSxcblx0XHRcdFx0dyA9IE1hdGgubWluKHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpLCRjb250YWluZXIud2lkdGgoKSksXG5cdFx0XHRcdGggPSBNYXRoLm1pbih0aGlzLm1vZGVsLmdldCgnaGVpZ2h0JyksJGNvbnRhaW5lci5oZWlnaHQoKSk7XG5cdFx0XHRcblx0XHRcdHJldHVybiBNYXRoLm1pbiggdyAvIHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpLCBoIC8gdGhpcy5tb2RlbC5nZXQoJ2hlaWdodCcpICk7XG5cdFx0fSxcblx0XHR1cGRhdGVGb2N1c1BvaW50OiBmdW5jdGlvbiggKSB7XG5cdFx0XHR0aGlzLm1vZGVsLnNldCggJ2ZvY3VzcG9pbnQnLCB0aGlzLmZvY3VzcG9pbnR0b29sLmdldEZvY3VzcG9pbnQoKSApO1xuXHRcdH0sXG5cdFx0X3NldENyb3BTaXplcyA6IGZ1bmN0aW9uKCBjcm9wZGF0YSwgcmF0aW8gKSB7XG5cdFx0XHR2YXIgbW9kZWxTaXplcyA9IHRoaXMubW9kZWwuZ2V0KCdzaXplcycpXG5cdFx0XHRcdHJhdGlvID0gcmF0aW8gfHwgdGhpcy5jdXJyZW50X3JhdGlvO1xuXHRcdFx0Xy5lYWNoKHJhdGlvLnNpemVzLCBmdW5jdGlvbiggc2l6ZW5hbWUgKSB7XG5cdFx0XHRcdCEgbW9kZWxTaXplc1sgc2l6ZW5hbWUgXSAmJiAoIG1vZGVsU2l6ZXNbIHNpemVuYW1lIF0gPSB7fSApO1xuXHRcdFx0XHRtb2RlbFNpemVzWyBzaXplbmFtZSBdLmNyb3BkYXRhID0gY3JvcGRhdGE7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMubW9kZWwuc2V0KCAnc2l6ZXMnLCBtb2RlbFNpemVzICk7XG5cdFx0fSxcblx0XHRfZ2V0UmVsYXRpdmVDb29yZHM6IGZ1bmN0aW9uKCBjb29yZHMgKSB7XG5cdFx0XHR2YXIgdyA9IHRoaXMubW9kZWwuZ2V0KCd3aWR0aCcpLFxuXHRcdFx0XHRoID0gdGhpcy5tb2RlbC5nZXQoJ2hlaWdodCcpO1xuXHRcdFx0Zm9yICggdmFyIHMgaW4gY29vcmRzICkge1xuXHRcdFx0XHRpZiAoICdudW1iZXInPT09dHlwZW9mKGNvb3Jkc1tzXSkgKSB7XG5cdFx0XHRcdFx0c3dpdGNoIChzKSB7XG5cdFx0XHRcdFx0XHRjYXNlICd4Jzpcblx0XHRcdFx0XHRcdGNhc2UgJ3gxJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3gyJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3dpZHRoJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21pblgnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnbWF4WCc6XG5cdFx0XHRcdFx0XHRcdGNvb3Jkc1tzXSAvPSB3O1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvb3Jkc1tzXSAvPSBoO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdF9nZXRBYnNvbHV0ZUNvb3JkczogZnVuY3Rpb24oIGNvb3JkcyApIHtcblx0XHRcdHZhciB3ID0gdGhpcy5tb2RlbC5nZXQoJ3dpZHRoJyksXG5cdFx0XHRcdGggPSB0aGlzLm1vZGVsLmdldCgnaGVpZ2h0Jyk7XG5cdFx0XHRmb3IgKCB2YXIgcyBpbiBjb29yZHMgKSB7XG5cdFx0XHRcdGlmICggJ251bWJlcic9PT10eXBlb2YoY29vcmRzW3NdKSApIHtcblx0XHRcdFx0XHRzd2l0Y2ggKHMpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ3gnOlxuXHRcdFx0XHRcdFx0Y2FzZSAneDEnOlxuXHRcdFx0XHRcdFx0Y2FzZSAneDInOlxuXHRcdFx0XHRcdFx0Y2FzZSAnd2lkdGgnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnbWluWCc6XG5cdFx0XHRcdFx0XHRjYXNlICdtYXhYJzpcblx0XHRcdFx0XHRcdFx0Y29vcmRzW3NdICo9IHc7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29vcmRzW3NdICo9IGg7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblxuXG5cblx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5GcmFtZSA9IHdwLm1lZGlhLnZpZXcuTWVkaWFGcmFtZS5leHRlbmQoe1xuXHRcdHRlbXBsYXRlOiAgd3AudGVtcGxhdGUoJ3JvYm9jcm9wLW1vZGFsJyksXG5cdFx0cmVnaW9uczogICBbJ3RpdGxlJywnY29udGVudCcsJ2luc3RydWN0aW9ucycsJ2J1dHRvbnMnXVxuXHR9KTtcblxuXHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3LkZyYW1lLkNyb3AgPSB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LkZyYW1lLmV4dGVuZCh7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgLnJvYm9jcm9wLXNhdmUnXHRcdDogJ3NhdmUnLFxuXHRcdFx0J2NsaWNrIC5yb2JvY3JvcC1jYW5jZWwnXHQ6ICdjbG9zZScsXG5cdFx0fSxcblx0XHRzYXZlOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJCgnLnJvYm9jcm9wLXNhdmUsIC5yb2JvY3JvcC1jYW5jZWwnKS5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG5cdFx0XHR0aGlzLl9jb250ZW50LnNhdmUoKTtcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdFx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5GcmFtZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdHRoaXMuY3JlYXRlVGl0bGUoKTtcblx0XHRcdHRoaXMuY3JlYXRlQ29udGVudCgpO1xuXHRcdFx0dGhpcy5jcmVhdGVCdXR0b25zKCk7XG5cblx0XHRcdHRoaXMub24oJ2Nsb3NlJywgdGhpcy5kaXNtaXNzLCB0aGlzICk7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLl9jb250ZW50LCAnc2F2ZWQnLCB0aGlzLm1vZGVsU3luYyApO1xuXHRcdH0sXG5cdFx0bW9kZWxTeW5jOiBmdW5jdGlvbigpe1xuXHRcdFx0dGhpcy4kKCcucm9ib2Nyb3Atc2F2ZSwgLnJvYm9jcm9wLWNhbmNlbCcpLnByb3AoICdkaXNhYmxlZCcsIGZhbHNlICk7XG5cdFx0fSxcblx0XHRkaXNtaXNzOmZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLl9jb250ZW50LmRpc21pc3MoKTtcblx0XHR9LFxuXHRcdGNyZWF0ZVRpdGxlOiBmdW5jdGlvbiggKSB7XG5cdFx0XHR0aGlzLl90aXRsZSA9IG5ldyB3cC5tZWRpYS5WaWV3KHtcblx0XHRcdFx0dGFnTmFtZTogJ2gxJ1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLl90aXRsZS4kZWwudGV4dCggbDEwbi5BdHRhY2htZW50RGV0YWlscyApO1xuXHRcdFx0dGhpcy50aXRsZS5zZXQoIFsgdGhpcy5fdGl0bGUgXSApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlQ29udGVudDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgb3B0cyA9IF8uZXh0ZW5kKHtcblx0XHRcdFx0Y29udHJvbGxlcjogdGhpcy5jb250cm9sbGVyLFxuXHRcdFx0XHRtb2RlbDogdGhpcy5tb2RlbFxuXHRcdFx0fSwgdGhpcy5vcHRpb25zICk7XG5cdFx0XHR0aGlzLl9jb250ZW50ID0gbmV3IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuUm9ib2Nyb3BJbWFnZSggb3B0cyApO1xuXHRcdFx0dGhpcy5jb250ZW50LnNldCggWyB0aGlzLl9jb250ZW50IF0gKTtcblx0XHR9LFxuXHRcdGNyZWF0ZUJ1dHRvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZm8sIGJ0bjtcblxuXHRcdFx0dGhpcy5idXR0b25zLnNldCggW1xuXHRcdFx0XHRuZXcgd3AubWVkaWEudmlldy5CdXR0b24oe1xuXHRcdFx0XHRcdHRleHQ6IGwxMG4uQ2xvc2UsXG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiAnYnV0dG9uLXNlY29uZGFyeSByb2JvY3JvcC1jYW5jZWwnXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRuZXcgd3AubWVkaWEudmlldy5CdXR0b24oe1xuXHRcdFx0XHRcdHRleHQ6IGwxMG4uU2F2ZUNoYW5nZXMsXG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiAnYnV0dG9uLXByaW1hcnkgcm9ib2Nyb3Atc2F2ZSdcblx0XHRcdFx0fSlcblx0XHRcdF0gKTtcblx0XHR9XG5cdH0pO1xuXG5cblxuXG59KSh3cCxqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKHdwLCQpIHtcblxuXHR2YXIgaW1hZ2VfcmF0aW9zID0gd2luZG93LndwX3JvYm9jcm9wLmltYWdlX3JhdGlvcyxcblx0XHRpbWFnZV9zaXplcyAgPSB3aW5kb3cud3Bfcm9ib2Nyb3AuaW1hZ2Vfc2l6ZXMsXG5cdFx0bDEwbiA9IHdpbmRvdy53cF9yb2JvY3JvcC5sMTBuO1xuXG5cdHZhciBWaWV3XHRcdD0gd3AubWVkaWEuVmlldyxcblx0XHRNZWRpYUZyYW1lXHQ9IHdwLm1lZGlhLnZpZXcuTWVkaWFGcmFtZSxcblx0XHRGb2N1c1BvaW50LFxuXHRcdENyb3BSZWN0O1xuXHRcblx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5mb2N1c3BvaW50ID0ge307XG5cblx0Q3JvcFJlY3QgPSB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LmZvY3VzcG9pbnQuQ3JvcFJlY3QgPSBWaWV3LmV4dGVuZCh7XG4vL1x0XHR0YWdOYW1lOiAnZGl2Jyxcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ2Nyb3ByZWN0JyksXG5cdFx0Y2xhc3NOYW1lOlx0J3Rvb2wtY3JvcHJlY3QnLFxuXHRcdGNvbnRyb2xsZXI6bnVsbCxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdFZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0XG5cdFx0XHRfLmRlZmF1bHRzKCB0aGlzLm9wdGlvbnMsIHsgXG5cdFx0XHRcdGZvY3VzcG9pbnQ6IG51bGwsIC8vIGZvY3VzcG9pbnQgY29vcmRzXG5cdFx0XHRcdHJhdGlvOiBudWxsXG5cdFx0XHR9ICk7XG5cdFx0XHR0aGlzLmNvbnRyb2xsZXIgPSB0aGlzLm9wdGlvbnMuY29udHJvbGxlcjtcblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMuY29udHJvbGxlci5pbWFnZSwgJ2xvYWQnLCB0aGlzLmltYWdlTG9hZGVkICk7XG5cdFx0fSxcbi8vIFx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuLy9cdFx0XHRWaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuLy9cdFx0XHR0aGlzLiRlbC5jc3MoICdwYWRkaW5nLWJvdHRvbScsICggdGhpcy5vcHRpb25zLnJhdGlvICogMTAwICkgKyAnJScgKTtcbi8vIFx0XHRcdHRoaXMuJGVsLmF0dHIoICdkYXRhLWRpcicsIHRoaXMub3B0aW9ucy5yYXRpbyA+IHRoaXMuY29udHJvbGxlci5pbWFnZS5yYXRpbyA/ICd3JyA6ICdoJyApO1xuLy8gXHRcdFx0cmV0dXJuIHRoaXM7XG4vLyBcdFx0fSxcblx0XHRpbWFnZUxvYWRlZDpmdW5jdGlvbiggaW1hZ2UgKSB7XG5cdFx0XHR0aGlzLiRlbC5hdHRyKCAnZGF0YS1yYXRpby1uYW1lJywgdGhpcy5vcHRpb25zLnJhdGlvLm5hbWUgKyAnIDogMScgKTtcblx0XHRcdHRoaXMuJGVsLmF0dHIoICdkYXRhLWRpcicsIHRoaXMub3B0aW9ucy5yYXRpby5yYXRpbyA+IGltYWdlLnJhdGlvID8gJ3cnIDogJ2gnICk7XG5cdFx0XHR0aGlzLiRlbC5jc3MoICd3aWR0aCcsIE1hdGgubWluKCAxLCB0aGlzLm9wdGlvbnMucmF0aW8ucmF0aW8gLyBpbWFnZS5yYXRpbyApICogMTAwICsnJScgKTtcblx0XHRcdHRoaXMuc2V0Rm9jdXNwb2ludCggKTtcblx0XHRcdC8vIHNldCBwb3NpdGlvbiBmcm9tIGZvc3VzcG9pbnRcblx0XHR9LFxuXHRcdHNldEZvY3VzcG9pbnQ6ZnVuY3Rpb24oIGZvY3VzcG9pbnQgKSB7XG5cdFx0XHRpZiAoICEhZm9jdXNwb2ludCApIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLmZvY3VzcG9pbnQgPSBmb2N1c3BvaW50O1xuXHRcdFx0fVxuXHRcdFx0dmFyIGltYWdlaW5mbyA9IHtcblx0XHRcdFx0XHR3aWR0aFx0XHQ6IHRoaXMuY29udHJvbGxlci5pbWFnZS4kZWwud2lkdGgoKSxcblx0XHRcdFx0XHRoZWlnaHRcdFx0OiB0aGlzLmNvbnRyb2xsZXIuaW1hZ2UuJGVsLmhlaWdodCgpLFxuXHRcdFx0XHRcdGZvY3VzcG9pbnRcdDogdGhpcy5vcHRpb25zLmZvY3VzcG9pbnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcyA9IHdwLm1lZGlhLnJvYm9jcm9wLmNyb3BGcm9tRm9jdXNQb2ludCggaW1hZ2VpbmZvLCB0aGlzLm9wdGlvbnMucmF0aW8gKSxcblx0XHRcdFx0Y29vcmQgPSB3cC5tZWRpYS5yb2JvY3JvcC5yZWxUb0Fic0Nvb3JkcyggcmVzLCBpbWFnZWluZm8gKTtcbiBcdFx0XHR0aGlzLiRlbC5jc3MoJ2xlZnQnLGNvb3JkLnggKyAncHgnICk7XG4gXHRcdFx0dGhpcy4kZWwuY3NzKCd0b3AnLGNvb3JkLnkgKyAncHgnICk7XG4gXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHR9KTtcblxuXHRGb2N1c1BvaW50ID0gd3AubWVkaWEucm9ib2Nyb3Audmlldy5mb2N1c3BvaW50LkZvY3VzUG9pbnQgPSBWaWV3LmV4dGVuZCh7XG5cdFx0Y2xhc3NOYW1lOlx0J3Rvb2wtZm9jdXNwb2ludCcsXG5cdFx0dGVtcGxhdGU6XHR3cC50ZW1wbGF0ZSgnZm9jdXNwb2ludCcpLFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRfLmRlZmF1bHRzKCB0aGlzLm9wdGlvbnMsIHsgXG5cdFx0XHRcdGZvY3VzcG9pbnQ6e3g6MCx5OjB9LCBcblx0XHRcdFx0ZW5hYmxlZDogZmFsc2UgLFxuXHRcdFx0XHRjcm9wUmVjdHM6W11cblx0XHRcdH0gKTtcblx0XHRcdHRoaXMub3B0aW9ucy5jcm9wUmVjdHMuc29ydChmdW5jdGlvbihhLGIpe1xuXHRcdFx0XHRyZXR1cm4gYS5vcHRpb25zLnJhdGlvLnJhdGlvIC0gYi5vcHRpb25zLnJhdGlvLnJhdGlvO1xuLy8gXHRcdFx0XHR2YXIgcmEgPSBhLm9wdGlvbnMucmF0aW8ucmF0aW8sXG4vLyBcdFx0XHRcdFx0cmIgPSBiLm9wdGlvbnMucmF0aW8ucmF0aW87XG4vLyBcdFx0XHRcdGlmICggcmEgPCByYiApIHtcbi8vIFx0XHRcdFx0XHRyZXR1cm4gLTE7XG4vLyBcdFx0XHRcdH0gXG4vLyBcdFx0XHRcdGlmICggcmEgPiByYiApIHtcbi8vIFx0XHRcdFx0XHRyZXR1cm4gMTtcbi8vIFx0XHRcdFx0fSBcbi8vIFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy4kZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRzZWxmLmNsaWNrRm9jdXNwb2ludCggZXZlbnQgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVuZGVyOmZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRWaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0Xy5lYWNoKCB0aGlzLm9wdGlvbnMuY3JvcFJlY3RzLCBmdW5jdGlvbiggcmVjdCApe1xuXHRcdFx0XHRyZWN0LnJlbmRlcigpO1xuXHRcdFx0XHRzZWxmLiRlbC5hcHBlbmQoIHJlY3QuJGVsICk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2V0RW5hYmxlZDogZnVuY3Rpb24oIGVuYWJsZWQgKSB7XG5cdFx0XHR2YXIgcHJldiA9IHRoaXMub3B0aW9ucy5lbmFibGVkO1xuXHRcdFx0dGhpcy5vcHRpb25zLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdFx0dGhpcy4kZWwuYXR0ciggJ2RhdGEtZW5hYmxlZCcsIGVuYWJsZWQudG9TdHJpbmcoKSApO1xuXHRcdFx0cmV0dXJuIHByZXY7XG5cdFx0fSxcblx0XHRjbGlja0ZvY3VzcG9pbnQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciBvZmZzO1xuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5hYmxlZCApIHtcblx0XHRcdFx0b2ZmcyA9IHRoaXMuJGVsLm9mZnNldCgpO1xuXHRcdFx0XHR0aGlzLnNldEZvY3VzcG9pbnQoIHtcblx0XHRcdFx0XHR4OiAgMiAqIChldmVudC5wYWdlWCAtIG9mZnMubGVmdCApIC8gdGhpcy4kZWwud2lkdGgoKSAgLSAxLFxuXHRcdFx0XHRcdHk6IC0yICogKGV2ZW50LnBhZ2VZIC0gb2Zmcy50b3AgKSAvIHRoaXMuJGVsLmhlaWdodCgpICsgMSxcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Z2V0Rm9jdXNwb2ludDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5mb2N1c3BvaW50O1xuXHRcdH0sXG5cdFx0c2V0Rm9jdXNwb2ludDogZnVuY3Rpb24oIGZvY3VzcG9pbnQgKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMuZm9jdXNwb2ludCA9IGZvY3VzcG9pbnQ7XG5cblx0XHRcdHRoaXMuJGVsLmZpbmQoJy5mb2N1c3BvaW50JykuY3NzKHtcblx0XHRcdFx0bGVmdDogXHQoKGZvY3VzcG9pbnQueCArIDEpICogNTApKyclJyxcblx0XHRcdFx0Ym90dG9tOlx0KChmb2N1c3BvaW50LnkgKyAxKSAqIDUwKSsnJSdcblx0XHRcdH0pO1xuXG5cdFx0XHRfLmVhY2goIHRoaXMub3B0aW9ucy5jcm9wUmVjdHMsIGZ1bmN0aW9uKHJlY3Qpe1xuXHRcdFx0XHRyZWN0LnNldEZvY3VzcG9pbnQoIHNlbGYuZm9jdXNwb2ludCApO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmFibGVkICkge1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZTpmb2N1c3BvaW50JywgdGhpcy5mb2N1c3BvaW50ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHR9KTtcblxuXHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3LmZvY3VzcG9pbnQuSW1hZ2VGb2N1c1BvaW50U2VsZWN0ID0gVmlldy5leHRlbmQoe1xuXHRcdGNsYXNzTmFtZTpcdCdyb2JvY3JvcC1pbWFnZS1ib3gnLFxuXHRcdGNyb3BSZWN0czogW10sXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oICl7XG5cblx0XHRcdF8uZGVmYXVsdHMoIHRoaXMub3B0aW9ucywgeyBcblx0XHRcdFx0Y29udHJvbGxlcjogdGhpcywgXG5cdFx0XHRcdGZvY3VzcG9pbnQ6IHt4OjAseTowfSwgXG5cdFx0XHRcdHNyYzogZmFsc2UsIFxuXHRcdFx0XHRpbWFnZTogZmFsc2UsIFxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdH0gKTtcblxuXHRcdFx0dmFyIHNlbGYgXHRcdD0gdGhpcztcblxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuaW1hZ2UgIT09IGZhbHNlICYmICh0aGlzLm9wdGlvbnMuaW1hZ2UuY29uc3RydWN0b3IucHJvdG90eXBlID09IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuSW1nLnByb3RvdHlwZSApICkge1xuXHRcdFx0XHR0aGlzLmltYWdlID0gdGhpcy5vcHRpb25zLmltYWdlO1xuXHRcdFx0fSBlbHNlIGlmICggdGhpcy5vcHRpb25zLnNyYyAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdHRoaXMuaW1hZ2VcdD0gbmV3IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuSW1nKCB7IHNyYzogdGhpcy5vcHRpb25zLnNyYyB9KTtcblx0XHRcdH0gZWxzZSAge1xuXHRcdFx0XHR0aGlzLmltYWdlID0gbmV3IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuSW1nKCB7IHNyYzogJycgfSwgdGhpcy5vcHRpb25zLmltYWdlKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5jcm9wUmVjdHMgPSBbXTtcblx0XHRcdF8uZWFjaCggaW1hZ2VfcmF0aW9zLCBmdW5jdGlvbiggcmF0aW8sIGtleSApIHtcblx0XHRcdFx0c2VsZi5jcm9wUmVjdHMucHVzaCggbmV3IENyb3BSZWN0KCB7XG5cdFx0XHRcdFx0Y29udHJvbGxlcjogc2VsZixcblx0XHRcdFx0XHRmb2N1c3BvaW50OiBzZWxmLm9wdGlvbnMuZm9jdXNwb2ludCxcblx0XHRcdFx0XHRyYXRpbzogcmF0aW9cblx0XHRcdFx0fSApICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5mb2N1c3BvaW50XHQ9IG5ldyBGb2N1c1BvaW50KHsgXG5cdFx0XHRcdGNvbnRyb2xsZXI6IHRoaXMuY29udHJvbGxlcixcblx0XHRcdFx0Zm9jdXNwb2ludDogdGhpcy5vcHRpb25zLmZvY3VzcG9pbnQsXG5cdFx0XHRcdGVuYWJsZWQ6IFx0dGhpcy5vcHRpb25zLmVuYWJsZWQsXG5cdFx0XHRcdGNyb3BSZWN0czpcdHRoaXMuY3JvcFJlY3RzLFxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMuZm9jdXNwb2ludCwgJ2NoYW5nZTpmb2N1c3BvaW50JywgdGhpcy52YWx1ZUNoYW5nZWQgKTtcblx0XHR9LFxuXHRcdHNldEVuYWJsZWQ6IGZ1bmN0aW9uKCBlbmFibGVkICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZm9jdXNwb2ludC5zZXRFbmFibGVkKCBlbmFibGVkIClcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRWaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0dGhpcy52aWV3cy5zZXQoIFsgdGhpcy5pbWFnZSwgdGhpcy5mb2N1c3BvaW50IF0gKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0Z2V0Rm9jdXNwb2ludDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5mb2N1c3BvaW50LmdldEZvY3VzcG9pbnQoKTtcblx0XHR9LFxuXHRcdHNldEZvY3VzcG9pbnQ6IGZ1bmN0aW9uKCBmb2N1c3BvaW50ICkge1xuXHRcdFx0dGhpcy5mb2N1c3BvaW50ICYmIHRoaXMuZm9jdXNwb2ludC5zZXRGb2N1c3BvaW50KCBmb2N1c3BvaW50ICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGdldEltYWdlV2lkdGg6IGZ1bmN0aW9uKCApIHtcblx0XHRcdHJldHVybiB0aGlzLmltYWdlLiRlbC5nZXQoMCkubmF0dXJhbFdpZHRoO1xuXHRcdH0sXG5cdFx0Z2V0SW1hZ2VIZWlnaHQ6IGZ1bmN0aW9uKCApIHtcblx0XHRcdHJldHVybiB0aGlzLmltYWdlLiRlbC5nZXQoMCkubmF0dXJhbEhlaWdodDtcblx0XHR9LFxuXHRcdHNldFNyYzogZnVuY3Rpb24oIHNyYyApIHtcblx0XHRcdHRoaXMuaW1hZ2UuJGVsLmF0dHIoICdzcmMnLCBzcmMgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0dmFsdWVDaGFuZ2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcpO1xuXHRcdH1cblx0fSk7XG5cblx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5GcmFtZS5Gb2N1c3BvaW50ID0gd3AubWVkaWEucm9ib2Nyb3Audmlldy5GcmFtZS5leHRlbmQoe1xuXHRcdGNsYXNzTmFtZTogJ2Fzay1mb2N1c3BvaW50IG1lZGlhLWZyYW1lJyxcblx0XHRldmVudHM6IHtcblx0XHRcdCdjbGljayAucmVzZXQnOiAncmVzZXQnLFxuXHRcdFx0J2NsaWNrIC5wcm9jZWVkJzogJ3Byb2NlZWQnLFxuXHRcdFx0J2NsaWNrIC5jYW5jZWwtdXBsb2FkJzogJ2NhbmNlbFVwbG9hZCcsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiggKSB7XG5cblx0XHRcdF8uZGVmYXVsdHMoIHRoaXMub3B0aW9ucywge1xuXHRcdFx0XHR1cGxvYWRlcjpcdGZhbHNlLFxuXHRcdFx0XHR0aXRsZTpcdFx0bDEwbi5TZXRGb2N1c1BvaW50LFxuXHRcdFx0XHRtb2RhbDogdGhpcy5vcHRpb25zID8gdGhpcy5vcHRpb25zLm1vZGFsIDogZmFsc2UsXG5cdFx0XHRcdHNyYzogJycgLy8gZXhwZWN0aW5nIGFuIGltZyBlbGVtZW50XG5cdFx0XHR9KTtcblxuXHRcdFx0d3AubWVkaWEucm9ib2Nyb3Audmlldy5GcmFtZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cblx0XHRcdGlmICggdGhpcy5tb2RhbCApIHtcblx0XHRcdFx0dGhpcy5tb2RhbC5vbignZXNjYXBlJywgdGhpcy5jYW5jZWxVcGxvYWQsIHRoaXMgKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuY3JlYXRlVGl0bGUoKTtcblx0XHRcdHRoaXMuY3JlYXRlQ29udGVudCgpO1xuXHRcdFx0dGhpcy5jcmVhdGVJbnN0cnVjdGlvbnMoKTtcblx0XHRcdHRoaXMuY3JlYXRlQnV0dG9ucygpO1xuXHRcdH0sXG4vLyBcdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcbi8vIFx0XHRcdC8vIGZyYW1lIGxheW91dFxuLy8gXG4vLyBcdFx0XHR3cC5tZWRpYS5yb2JvY3JvcC52aWV3Lk1vZGFsLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuLy8gXHRcdH0sXG5cdFx0Y3JlYXRlVGl0bGU6IGZ1bmN0aW9uKCApIHtcblx0XHRcdHRoaXMuX3RpdGxlID0gbmV3IHdwLm1lZGlhLlZpZXcoe1xuXHRcdFx0XHR0YWdOYW1lOiAnaDEnXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuX3RpdGxlLiRlbC50ZXh0KCB0aGlzLm9wdGlvbnMudGl0bGUgKTtcblx0XHRcdHRoaXMudGl0bGUuc2V0KCBbIHRoaXMuX3RpdGxlIF0gKTtcblx0XHR9LFxuXHRcdGNyZWF0ZUNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fY29udGVudCA9IG5ldyB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LmZvY3VzcG9pbnQuSW1hZ2VGb2N1c1BvaW50U2VsZWN0KHtcblx0XHRcdFx0c3JjOiAnJyxcblx0XHRcdFx0Zm9jdXNwb2ludDp7IHg6MCwgeTowIH0sXG5cdFx0XHRcdGNvbnRyb2xsZXI6IHRoaXMsXG5cdFx0XHRcdGVuYWJsZWQ6IHRydWVcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5jb250ZW50LnNldCggWyB0aGlzLl9jb250ZW50IF0gKTtcblx0XHR9LFxuXHRcdGNyZWF0ZUluc3RydWN0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5mbywgYnRuO1xuXHRcdFx0dGhpcy5pbnN0cnVjdGlvbnMuc2V0KCBbXG5cdFx0XHRcdG5ldyB3cC5tZWRpYS5WaWV3KHtcblx0XHRcdFx0XHRlbDogJCggJzxkaXYgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj4nICsgbDEwbi5Gb2N1c1BvaW50SW5zdHJ1Y3Rpb25zICsgJzwvZGl2PicgKVswXSxcblx0XHRcdFx0XHRwcmlvcml0eTogLTQwXG5cdFx0XHRcdH0pXG5cdFx0XHRdICk7XG5cdFx0fSxcblx0XHRjcmVhdGVCdXR0b25zOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbmZvLCBidG47XG5cblx0XHRcdHRoaXMuYnV0dG9ucy5zZXQoIFtcblx0XHRcdFx0bmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKHtcblx0XHRcdFx0XHR0ZXh0OiBsMTBuLkNhbmNlbFVwbG9hZCxcblx0XHRcdFx0XHRjbGFzc05hbWU6ICdjYW5jZWwtdXBsb2FkJ1xuXHRcdFx0XHR9KSxcblx0XHRcdFx0bmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKHtcblx0XHRcdFx0XHR0ZXh0OiBsMTBuLlJlc2V0LFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ3Jlc2V0J1xuXHRcdFx0XHR9KSxcblx0XHRcdFx0bmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKHtcblx0XHRcdFx0XHR0ZXh0OiBsMTBuLk9rYXksXG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiAnYnV0dG9uLXByaW1hcnkgcHJvY2VlZCdcblx0XHRcdFx0fSlcblx0XHRcdF0gKTtcblx0XHR9LFxuXG5cdFx0c2V0U3JjOiBmdW5jdGlvbiggc3JjICkge1xuXHRcdFx0dGhpcy5fY29udGVudC5zZXRTcmMoIHNyYyApO1xuXHRcdH0sXG5cdFx0c2V0RmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdGZyLm9ubG9hZCA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0c2VsZi5zZXRTcmMoIGZyLnJlc3VsdCApO1xuXHRcdFx0fVxuXHRcdFx0ZnIucmVhZEFzRGF0YVVSTCggZmlsZSApO1xuXHRcdH0sXG5cdFx0c2V0Rm9jdXNwb2ludDogZnVuY3Rpb24oIGZvY3VzcG9pbnQgKSB7XG5cdFx0XHR0aGlzLl9jb250ZW50LnNldEZvY3VzcG9pbnQoIGZvY3VzcG9pbnQgKTtcblx0XHR9LFxuXHRcdGdldEZvY3VzcG9pbnQ6IGZ1bmN0aW9uKCApIHtcblx0XHRcdHJldHVybiB0aGlzLl9jb250ZW50LmdldEZvY3VzcG9pbnQoKTtcblx0XHR9LFxuXHRcdGdldEltYWdlV2lkdGg6IGZ1bmN0aW9uKCApIHtcblx0XHRcdHJldHVybiB0aGlzLl9jb250ZW50LmdldEltYWdlV2lkdGgoKTtcblx0XHR9LFxuXHRcdGdldEltYWdlSGVpZ2h0OiBmdW5jdGlvbiggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fY29udGVudC5nZXRJbWFnZUhlaWdodCgpO1xuXHRcdH0sXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHRoaXMuc2V0Rm9jdXNwb2ludCggeyB4OjAsIHk6MCB9IClcblx0XHR9LFxuXHRcdHByb2NlZWQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHRoaXMudHJpZ2dlcigncHJvY2VlZCcpO1xuXHRcdH0sXG5cdFx0Y2FuY2VsVXBsb2FkOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHQvLyByZW1vdmUgZnJvbSBxdWV1ZSFcblx0XHRcdHRoaXMudHJpZ2dlcignY2FuY2VsLXVwbG9hZCcpO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH1cblx0fSk7XG5cbn0pKHdwLGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24od3AsJCkge1xuXG5cdHZhciBpbWFnZV9yYXRpb3NcdFx0PSB3aW5kb3cud3Bfcm9ib2Nyb3AuaW1hZ2VfcmF0aW9zLFxuXHRcdGltYWdlX3NpemVzXHRcdFx0PSB3aW5kb3cud3Bfcm9ib2Nyb3AuaW1hZ2Vfc2l6ZXMsXG5cdFx0bDEwblx0XHRcdFx0PSB3aW5kb3cud3Bfcm9ib2Nyb3AubDEwbixcblx0XHRvcHRpb25zXHRcdFx0XHQ9IHdpbmRvdy53cF9yb2JvY3JvcC5vcHRpb25zLFxuXHRcdGNyb3BCdG5IVE1MXHRcdFx0PSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gcm9ib2Nyb3Atb3BlblwiPicrbDEwbi5FZGl0SW1hZ2VTaXplcysnPC9idXR0b24+Jyxcblx0XHRjcm9wTGlua0hUTUxcdFx0PSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24tbGluayByb2JvY3JvcC1vcGVuXCI+JytsMTBuLkVkaXRJbWFnZVNpemVzKyc8L2J1dHRvbj4nO1xuIFxuXHR2YXIgcm9ib2Nyb3BTdGF0ZUV4dGVuZCA9IHtcblx0XHRjcmVhdGVTdGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fcGFyZW50Q3JlYXRlU3RhdGVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdHRoaXMuc3RhdGVzLmFkZChcblx0XHRcdFx0bmV3IHdwLm1lZGlhLnJvYm9jcm9wLmNvbnRyb2xsZXIuUm9ib2Nyb3BJbWFnZSgge1xuXHRcdFx0XHRcdG1vZGVsOiB0aGlzLm1vZGVsLFxuXHRcdFx0XHRcdHNlbGVjdGlvbjogdGhpcy5vcHRpb25zLnNlbGVjdGlvblxuXHRcdFx0XHR9IClcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIHBvc3QgaW5saW5lIGltYWdlIGVkaXRvclxuXHRfLmV4dGVuZCggd3AubWVkaWEudmlldy5JbWFnZURldGFpbHMucHJvdG90eXBlLCB7XG5cdFx0X3BhcmVudFBvc3RSZW5kZXI6IHdwLm1lZGlhLnZpZXcuSW1hZ2VEZXRhaWxzLnByb3RvdHlwZS5wb3N0UmVuZGVyLFxuXHRcdHBvc3RSZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fcGFyZW50UG9zdFJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR0aGlzLiRlbC5maW5kKCcuYWN0aW9ucycpLmFwcGVuZChjcm9wQnRuSFRNTCk7XG5cdFx0fSxcblx0XHRyb2JvY3JvcE9wZW46IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGNvbnNvbGUubG9nKCk7XG5cdFx0XHR2YXIgc2l6ZSA9IHRoaXMubW9kZWwuZ2V0KCdzaXplJyksXG5cdFx0XHRcdGNyb3B0b29sID0gbmV3IHdwLm1lZGlhLnJvYm9jcm9wLnZpZXcuRnJhbWUuQ3JvcCggeyBcblx0XHRcdFx0XHRjb250cm9sbGVyOiB0aGlzLmNvbnRyb2xsZXIsIFxuXHRcdFx0XHRcdG1vZGVsOiB0aGlzLmNvbnRyb2xsZXIuaW1hZ2UuYXR0YWNobWVudCxcblx0XHRcdFx0XHRzaXplVG9TZWxlY3Q6IHNpemVcblx0XHRcdFx0fSApO1xuXHRcdFx0Y3JvcHRvb2wub3BlbigpO1xuXHRcdH1cblx0fSk7XG5cdHdwLm1lZGlhLnZpZXcuSW1hZ2VEZXRhaWxzLnByb3RvdHlwZS5ldmVudHNbJ2NsaWNrIC5yb2JvY3JvcC1vcGVuJ10gPSAncm9ib2Nyb3BPcGVuJztcblxuXG5cdC8vIElubGluZSBNZWRpYUxpYnJhcnksIEdyaWQgdmlldyBNZWRpYUxpYnJhcnlcblx0Xy5leHRlbmQoIHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudC5EZXRhaWxzLnByb3RvdHlwZSwge1xuXHRcdF9wYXJlbnRSZW5kZXI6IHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudC5EZXRhaWxzLnByb3RvdHlwZS5yZW5kZXIsXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuX3BhcmVudFJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHQvLyBtZWRpYSBsaWJyYXJ5IHNjcmVlblxuXHRcdFx0aWYgKCB0aGlzLm1vZGVsLmdldCgndHlwZScpID09PSAnaW1hZ2UnICkge1xuXHRcdFx0XHR0aGlzLiQoJy5hdHRhY2htZW50LWFjdGlvbnMnKS5hcHBlbmQoY3JvcEJ0bkhUTUwpO1xuXHRcdFx0XHQkKCBjcm9wTGlua0hUTUwgKS5pbnNlcnRBZnRlciggdGhpcy4kZWwuZmluZCggJ2EuZWRpdC1hdHRhY2htZW50JyApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyb2JvY3JvcE9wZW46IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciBjcm9wdG9vbCA9IG5ldyB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LkZyYW1lLkNyb3AoIHsgXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogdGhpcy5jb250cm9sbGVyLCBcblx0XHRcdFx0XHRtb2RlbDogdGhpcy5tb2RlbFxuXHRcdFx0XHR9KTtcblx0XHRcdGNyb3B0b29sLm9wZW4oKTtcblx0XHR9LFxuXHRcdF9wYXJlbnRDcmVhdGVTdGF0ZXM6IHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudC5EZXRhaWxzLnByb3RvdHlwZS5jcmVhdGVTdGF0ZXNcblx0fSwgcm9ib2Nyb3BTdGF0ZUV4dGVuZCApO1xuXG5cdHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudC5EZXRhaWxzLnByb3RvdHlwZS5ldmVudHNbJ2NsaWNrIC5yb2JvY3JvcC1vcGVuJ10gPSAncm9ib2Nyb3BPcGVuJztcblxuXG59KSh3cCxqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCAkICkge1xuXG5cdHZhciBpbWFnZV9yYXRpb3MgPSB3aW5kb3cud3Bfcm9ib2Nyb3AuaW1hZ2VfcmF0aW9zLFxuXHRcdGltYWdlX3NpemVzICA9IHdpbmRvdy53cF9yb2JvY3JvcC5pbWFnZV9zaXplcyxcblx0XHRvcHRpb25zID0gd2luZG93LndwX3JvYm9jcm9wLm9wdGlvbnMsXG5cdFx0aW1hZ2VJbmZvcyA9IHt9O1xuXG5cdC8qKlxuXHQgKlx0RWFybHkgcmV0dXJuIGlmIGF1dG9jcm9wIGlzIGRpc2FibGVkXG5cdCAqL1xuXHRpZiAoICEgb3B0aW9ucy5hc2tfZm9yX2ZvY3VzcG9pbnQgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Xy5leHRlbmQoIHdwLm1lZGlhLnZpZXcuVXBsb2FkZXJXaW5kb3cucHJvdG90eXBlLCB7XG5cdFx0X3BhcmVudFJlYWR5OiB3cC5tZWRpYS52aWV3LlVwbG9hZGVyV2luZG93LnByb3RvdHlwZS5yZWFkeSxcblx0XHRkaWRSZWFkeTpmYWxzZSxcblxuXHRcdHJlYWR5OmZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGFza0ZvY3VzSW1hZ2VzID0gW10sXG5cdFx0XHRcdGFza01vZGFsLCBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gcHJldmVudCBkb3VibGUgaW5pdFxuXHRcdFx0aWYgKCB0aGlzLmRpZFJlYWR5ICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcGFyZW50UmVhZHkuYXBwbHkoIHRoaXMgLCBhcmd1bWVudHMgKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZGlkUmVhZHkgPSB0cnVlO1xuXG5cdFx0XHRyZXQgPSB0aGlzLl9wYXJlbnRSZWFkeS5hcHBseSggdGhpcyAsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHRmdW5jdGlvbiBhc2tGb2N1cyggdXBsb2FkZXIgKSB7XG5cdFx0XHRcdHZhciBmaWxlSXRlbSwgc3JjO1xuXHRcdFx0XHRpZiAoIGFza01vZGFsICkge1xuXHRcdFx0XHRcdGFza01vZGFsLmNsb3NlKCkuZGlzcG9zZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggISEgYXNrRm9jdXNJbWFnZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdGZpbGVJdGVtID0gYXNrRm9jdXNJbWFnZXMuc2hpZnQoKTtcblx0XHRcdFx0XHRhc2tNb2RhbCA9IG5ldyB3cC5tZWRpYS5yb2JvY3JvcC52aWV3LkZyYW1lLkZvY3VzcG9pbnQoeyBjb250cm9sbGVyOiAkKHRoaXMpIH0pO1xuXHRcdFx0XHRcdGFza01vZGFsLm9uKCdwcm9jZWVkJyxmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGltYWdlSW5mb3NbZmlsZUl0ZW0uZmlsZS5uYW1lXSA9IHtcblx0XHRcdFx0XHRcdFx0Zm9jdXNwb2ludDpcdGFza01vZGFsLmdldEZvY3VzcG9pbnQoKSxcblx0XHRcdFx0XHRcdFx0d2lkdGg6XHRcdGFza01vZGFsLmdldEltYWdlV2lkdGgoKSxcblx0XHRcdFx0XHRcdFx0aGVpZ2h0Olx0XHRhc2tNb2RhbC5nZXRJbWFnZUhlaWdodCgpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0YXNrRm9jdXMoIHVwbG9hZGVyICk7XG5cdFx0XHRcdFx0fSkub24oJ2NhbmNlbC11cGxvYWQnLGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZmlsZUl0ZW0uZmlsZS5hdHRhY2htZW50LmRlc3Ryb3koKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhc2tNb2RhbC5zZXRGb2N1c3BvaW50KHt4OjAseTowfSk7XG5cdFx0XHRcdFx0YXNrTW9kYWwuc2V0RmlsZSggZmlsZUl0ZW0uYmxvYiApO1xuXHRcdFx0XHRcdGFza01vZGFsLm9wZW4oKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR1cGxvYWRlci5zdGFydCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGFkZEFza0ZvY3VzKCBmaWxlRGF0YSwgdXBsb2FkZXIgKSB7XG5cdFx0XHRcdGFza0ZvY3VzSW1hZ2VzLnB1c2goIGZpbGVEYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8qKlxuXHRcdFx0ICpcdEByZXR1cm4gbmF0aXZlIGZpbGUgb2JqZWN0IG9yIGJsb2Jcblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZUZpbGUoIGZpbGUgKSB7XG5cdFx0XHRcdHZhciBfcmV0ID0ge1xuXHRcdFx0XHRcdGZpbGU6IGZpbGUsXG5cdFx0XHRcdFx0YmxvYjpmaWxlLmdldE5hdGl2ZSgpXG5cdFx0XHRcdH0sIF9yZXQyLCBieXRlcywgaTtcblx0XHRcdFx0aWYgKCAhIF9yZXQuYmxvYiApIHtcblx0XHRcdFx0XHRfcmV0LmJsb2IgPSBmaWxlLmdldFNvdXJjZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBfcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBzdG9wIHVwbG9hZGVyIGFuZCBnZW5lcmF0ZSBjcm9wZGF0YSBcblx0XHRcdHRoaXMudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnRmlsZXNBZGRlZCcsZnVuY3Rpb24oIHVwLCBmaWxlcyApIHtcblx0XHRcdFx0dmFyIGZpbGVEYXRhO1xuXG5cdFx0XHRcdC8vIHB1dCBtb2RhbFxuXHRcdFx0XHRmb3IgKHZhciBpPTA7aTxmaWxlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdFx0aWYgKCBmaWxlc1tpXS50eXBlID09ICdpbWFnZS9wbmcnIHx8IGZpbGVzW2ldLnR5cGUgPT0gJ2ltYWdlL2pwZWcnICkge1xuXHRcdFx0XHRcdFx0ZmlsZURhdGEgPSByZXNvbHZlRmlsZSggZmlsZXNbaV0gKTtcblx0XHRcdFx0XHRcdGlmICggZmlsZURhdGEuYmxvYiBpbnN0YW5jZW9mIEJsb2IgKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEFza0ZvY3VzKCBmaWxlRGF0YSwgdXAgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBhc2tGb2N1c0ltYWdlcy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0dXAuc3RvcCgpO1xuXHRcdFx0XHRcdHVwLnJlZnJlc2goKTtcblx0XHRcdFx0XHRhc2tGb2N1cyggdXAgKTsgLy8gd2lsbCBhc2sgZm9yIGZvY3VzIG9yIHN0YXJ0IHVwbG9hZGVyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJhc2tmb2N1c1wiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBzZW5kIGNyb3BkYXRhIFxuXHRcdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci5iaW5kKCdCZWZvcmVVcGxvYWQnLGZ1bmN0aW9uKCB1cCwgZmlsZSApIHtcblx0XHRcdFx0dmFyIHMsIGNyb3BkYXRhLCBmb2N1c3BvaW50O1xuXG5cdFx0XHRcdGlmICggaW1hZ2VJbmZvc1tmaWxlLm5hbWVdICkge1xuXG5cdFx0XHRcdFx0Ly8gYWRkIGZvY3VzIHBvaW50IGFuZCBjcm9wZGF0YSB0byBmaWxlXG5cdFx0XHRcdFx0aW1hZ2VpbmZvID0gaW1hZ2VJbmZvc1tmaWxlLm5hbWVdO1xuXHRcdFx0XHRcdGNyb3BkYXRhID0ge307XG5cdFx0XHRcdFx0Zm9yIChzIGluIGltYWdlX3JhdGlvcykge1xuXHRcdFx0XHRcdFx0Y3JvcGRhdGFbIGltYWdlX3JhdGlvc1tzXS5uYW1lIF0gPSB3cC5tZWRpYS5yb2JvY3JvcC5jcm9wRnJvbUZvY3VzUG9pbnQoIGltYWdlaW5mbywgaW1hZ2VfcmF0aW9zW3NdICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dXAuc2V0dGluZ3MubXVsdGlwYXJ0X3BhcmFtcy5mb2N1c3BvaW50XHQ9IEpTT04uc3RyaW5naWZ5KCBpbWFnZWluZm8uZm9jdXNwb2ludCApO1xuXHRcdFx0XHRcdHVwLnNldHRpbmdzLm11bHRpcGFydF9wYXJhbXMuY3JvcGRhdGFcdD0gSlNPTi5zdHJpbmdpZnkoIGNyb3BkYXRhICk7XG5cblx0XHRcdFx0XHRkZWxldGUoaW1hZ2VJbmZvc1tmaWxlLm5hbWVdKVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9KTtcblxufSkoIGpRdWVyeSApO1xuXG4iXX0=
